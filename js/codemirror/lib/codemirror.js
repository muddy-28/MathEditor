window.CodeMirror=(function(){var bt=/gecko\/\d/i.test(navigator.userAgent);var ao=/MSIE \d/.test(navigator.userAgent);var cb=ao&&(document.documentMode==null||document.documentMode<8);var ca=ao&&(document.documentMode==null||document.documentMode<9);var P=/WebKit\//.test(navigator.userAgent);var bw=P&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var aD=/Chrome\//.test(navigator.userAgent);var u=/Opera\//.test(navigator.userAgent);var by=/Apple Computer/.test(navigator.vendor);var ac=/KHTML\//.test(navigator.userAgent);var de=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent);var dl=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var bl=/PhantomJS/.test(navigator.userAgent);var av=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var bN=av||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var a5=av||/Mac/.test(navigator.platform);var bY=/windows/i.test(navigator.platform);var dw=u&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(dw){dw=Number(dw[1])}var dH=a5&&(bw||u&&(dw==null||dw<12.11));var cU=bt||(ao&&!ca);var aL=false,dt=false;function aq(dX,dY){if(!(this instanceof aq)){return new aq(dX,dY)}this.options=dY=dY||{};for(var dZ in a9){if(!dY.hasOwnProperty(dZ)&&a9.hasOwnProperty(dZ)){dY[dZ]=a9[dZ]}}a3(dY);var d3=typeof dY.value=="string"?0:dY.value.first;var d2=this.display=bx(dX,d3);d2.wrapper.CodeMirror=this;b1(this);if(dY.autofocus&&!bN){bE(this)}this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,draggingText:false,highlight:new i()};dh(this);if(dY.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}var d1=dY.value;if(typeof d1=="string"){d1=new M(dY.value,dY.mode)}j(this,cm)(this,d1);if(ao){setTimeout(b4(dg,this,true),20)}s(this);var d4;try{d4=(document.activeElement==d2.input)}catch(d0){}if(d4||(dY.autofocus&&!bN)){setTimeout(b4(dN,this),20)}else{O(this)}j(this,function(){for(var d6 in dG){if(dG.propertyIsEnumerable(d6)){dG[d6](this,dY[d6],h)}}for(var d5=0;d5<J.length;++d5){J[d5](this)}})()}function bx(dX,d0){var d1={};var dZ=d1.input=bH("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");if(P){dZ.style.width="1000px"}else{dZ.setAttribute("wrap","off")}dZ.setAttribute("autocorrect","off");dZ.setAttribute("autocapitalize","off");d1.inputDiv=bH("div",[dZ],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");d1.scrollbarH=bH("div",[bH("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");d1.scrollbarV=bH("div",[bH("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");d1.scrollbarFiller=bH("div",null,"CodeMirror-scrollbar-filler");d1.lineDiv=bH("div");d1.selectionDiv=bH("div",null,null,"position: relative; z-index: 1");d1.cursor=bH("div","\u00a0","CodeMirror-cursor");d1.otherCursor=bH("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor");d1.measure=bH("div",null,"CodeMirror-measure");d1.lineSpace=bH("div",[d1.measure,d1.selectionDiv,d1.lineDiv,d1.cursor,d1.otherCursor],null,"position: relative; outline: none");d1.mover=bH("div",[bH("div",[d1.lineSpace],"CodeMirror-lines")],null,"position: relative");d1.sizer=bH("div",[d1.mover],"CodeMirror-sizer");d1.heightForcer=bH("div","\u00a0",null,"position: absolute; height: "+c7+"px");d1.gutters=bH("div",null,"CodeMirror-gutters");d1.lineGutter=null;var dY=bH("div",[d1.sizer,d1.heightForcer,d1.gutters],null,"position: relative; min-height: 100%");d1.scroller=bH("div",[dY],"CodeMirror-scroll");d1.scroller.setAttribute("tabIndex","-1");d1.wrapper=bH("div",[d1.inputDiv,d1.scrollbarH,d1.scrollbarV,d1.scrollbarFiller,d1.scroller],"CodeMirror");if(cb){d1.gutters.style.zIndex=-1;d1.scroller.style.paddingRight=0}if(dX.appendChild){dX.appendChild(d1.wrapper)}else{dX(d1.wrapper)}if(av){dZ.style.width="0px"}if(!P){d1.scroller.draggable=true}if(ac){d1.inputDiv.style.height="1px";d1.inputDiv.style.position="absolute"}else{if(cb){d1.scrollbarH.style.minWidth=d1.scrollbarV.style.minWidth="18px"}}d1.viewOffset=d1.lastSizeC=0;d1.showingFrom=d1.showingTo=d0;d1.lineNumWidth=d1.lineNumInnerWidth=d1.lineNumChars=null;d1.prevInput="";d1.alignWidgets=false;d1.pollingFast=false;d1.poll=new i();d1.draggingText=false;d1.cachedCharWidth=d1.cachedTextHeight=null;d1.measureLineCache=[];d1.measureLineCachePos=0;d1.inaccurateSelection=false;d1.maxLine=null;d1.maxLineLength=0;d1.maxLineChanged=false;d1.wheelDX=d1.wheelDY=d1.wheelStartX=d1.wheelStartY=null;return d1}function b8(dX){dX.doc.mode=aq.getMode(dX.options,dX.doc.modeOption);dX.doc.iter(function(dY){if(dY.stateAfter){dY.stateAfter=null}if(dY.styles){dY.styles=null}});dX.doc.frontier=dX.doc.first;bK(dX,100);dX.state.modeGen++;if(dX.curOp){bR(dX)}}function dn(dX){if(dX.options.lineWrapping){dX.display.wrapper.className+=" CodeMirror-wrap";dX.display.sizer.style.minWidth=""}else{dX.display.wrapper.className=dX.display.wrapper.className.replace(" CodeMirror-wrap","");bB(dX)}cu(dX);bR(dX);c0(dX);setTimeout(function(){x(dX.display,dX.doc.height)},100)}function aU(dX){var dZ=b0(dX.display),dY=dX.options.lineWrapping;var d0=dY&&Math.max(5,dX.display.scroller.clientWidth/a6(dX.display)-3);return function(d1){if(bc(dX.doc,d1)){return 0}else{if(dY){return(Math.ceil(d1.text.length/d0)||1)*dZ}else{return dZ}}}}function cu(dX){var dZ=dX.doc,dY=aU(dX);dZ.iter(function(d0){var d1=dY(d0);if(d1!=d0.height){aO(d0,d1)}})}function da(dX){var dY=dM[dX.options.keyMap].style;dX.display.wrapper.className=dX.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(dY?" cm-keymap-"+dY:"")}function dh(dX){dX.display.wrapper.className=dX.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+dX.options.theme.replace(/(^|\s)\s*/g," cm-s-");c0(dX)}function b3(dX){b1(dX);bR(dX)}function b1(dX){var dY=dX.display.gutters,d2=dX.options.gutters;cR(dY);for(var dZ=0;dZ<d2.length;++dZ){var d0=d2[dZ];var d1=dY.appendChild(bH("div",null,"CodeMirror-gutter "+d0));if(d0=="CodeMirror-linenumbers"){dX.display.lineGutter=d1;d1.style.width=(dX.display.lineNumWidth||1)+"px"}}dY.style.display=dZ?"":"none"}function b6(d1,dZ){if(dZ.height==0){return 0}var dY=dZ.text.length,dX,d2=dZ;while(dX=ds(d2)){var d0=dX.find();d2=dm(d1,d0.from.line);dY+=d0.from.ch-d0.to.ch}d2=dZ;while(dX=I(d2)){var d0=dX.find();dY-=d2.text.length-d0.from.ch;d2=dm(d1,d0.to.line);dY+=d2.text.length-d0.to.ch}return dY}function bB(dX){var dZ=dX.display,dY=dX.doc;dZ.maxLine=dm(dY,dY.first);dZ.maxLineLength=b6(dY,dZ.maxLine);dZ.maxLineChanged=true;dY.iter(function(d1){var d0=b6(dY,d1);if(d0>dZ.maxLineLength){dZ.maxLineLength=d0;dZ.maxLine=d1}})}function a3(dX){var dZ=false;for(var dY=0;dY<dX.gutters.length;++dY){if(dX.gutters[dY]=="CodeMirror-linenumbers"){if(dX.lineNumbers){dZ=true}else{dX.gutters.splice(dY--,1)}}}if(!dZ&&dX.lineNumbers){dX.gutters.push("CodeMirror-linenumbers")}}function x(d2,dX){var dZ=dX+2*c6(d2);d2.sizer.style.minHeight=d2.heightForcer.style.top=dZ+"px";var d0=Math.max(dZ,d2.scroller.scrollHeight);var d1=d2.scroller.scrollWidth>d2.scroller.clientWidth;var dY=d0>d2.scroller.clientHeight;if(dY){d2.scrollbarV.style.display="block";d2.scrollbarV.style.bottom=d1?co(d2.measure)+"px":"0";d2.scrollbarV.firstChild.style.height=(d0-d2.scroller.clientHeight+d2.scrollbarV.clientHeight)+"px"}else{d2.scrollbarV.style.display=""}if(d1){d2.scrollbarH.style.display="block";d2.scrollbarH.style.right=dY?co(d2.measure)+"px":"0";d2.scrollbarH.firstChild.style.width=(d2.scroller.scrollWidth-d2.scroller.clientWidth+d2.scrollbarH.clientWidth)+"px"}else{d2.scrollbarH.style.display=""}if(d1&&dY){d2.scrollbarFiller.style.display="block";d2.scrollbarFiller.style.height=d2.scrollbarFiller.style.width=co(d2.measure)+"px"}else{d2.scrollbarFiller.style.display=""}if(de&&co(d2.measure)===0){d2.scrollbarV.style.minWidth=d2.scrollbarH.style.minHeight=dl?"18px":"12px"}}function bG(d2,d1,d0){var dZ=d2.scroller.scrollTop,dX=d2.wrapper.clientHeight;if(typeof d0=="number"){dZ=d0}else{if(d0){dZ=d0.top;dX=d0.bottom-d0.top}}dZ=Math.floor(dZ-c6(d2));var dY=Math.ceil(dZ+dX);return{from:ba(d1,dZ),to:ba(d1,dY)}}function ad(dX){var d3=dX.display;if(!d3.alignWidgets&&(!d3.gutters.firstChild||!dX.options.fixedGutter)){return}var d0=dS(d3)-d3.scroller.scrollLeft+dX.doc.scrollLeft;var d2=d3.gutters.offsetWidth,dZ=d0+"px";for(var d4=d3.lineDiv.firstChild;d4;d4=d4.nextSibling){if(d4.alignable){for(var d1=0,dY=d4.alignable;d1<dY.length;++d1){dY[d1].style.left=dZ}}}if(dX.options.fixedGutter){d3.gutters.style.left=(d0+d2)+"px"}}function ab(dX){if(!dX.options.lineNumbers){return false}var d2=dX.doc,dY=c2(dX.options,d2.first+d2.size-1),d1=dX.display;if(dY.length!=d1.lineNumChars){var d3=d1.measure.appendChild(bH("div",[bH("div",dY)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var dZ=d3.firstChild.offsetWidth,d0=d3.offsetWidth-dZ;d1.lineGutter.style.width="";d1.lineNumInnerWidth=Math.max(dZ,d1.lineGutter.offsetWidth-d0);d1.lineNumWidth=d1.lineNumInnerWidth+d0;d1.lineNumChars=d1.lineNumInnerWidth?dY.length:-1;d1.lineGutter.style.width=d1.lineNumWidth+"px";return true}return false}function c2(dX,dY){return String(dX.lineNumberFormatter(dY+dX.firstLineNumber))}function dS(dX){return t(dX.scroller).left-t(dX.sizer).left}function cL(dX,d0,d1){var dZ=dX.display.showingFrom,d2=dX.display.showingTo;var dY=bC(dX,d0,d1);if(dY){ce(dX,"update",dX);if(dX.display.showingFrom!=dZ||dX.display.showingTo!=d2){ce(dX,"viewportChange",dX,dX.display.showingFrom,dX.display.showingTo)}}dR(dX);x(dX.display,dX.doc.height);return dY}function bC(d3,el,dX){var ef=d3.display,em=d3.doc;if(!ef.wrapper.clientWidth){ef.showingFrom=ef.showingTo=em.first;ef.viewOffset=0;return}var dZ=bG(ef,em,dX);if(el.length==0&&dZ.from>ef.showingFrom&&dZ.to<ef.showingTo){return}if(ab(d3)){el=[{from:em.first,to:em.first+em.size}]}var ej=ef.sizer.style.marginLeft=ef.gutters.offsetWidth+"px";ef.scrollbarH.style.left=d3.options.fixedGutter?ej:"0";var d0=Infinity;if(d3.options.lineNumbers){for(var eg=0;eg<el.length;++eg){if(el[eg].diff){d0=el[eg].from;break}}}var d1=em.first+em.size;var ee=Math.max(dZ.from-d3.options.viewportMargin,em.first);var dY=Math.min(d1,dZ.to+d3.options.viewportMargin);if(ef.showingFrom<ee&&ee-ef.showingFrom<20){ee=Math.max(em.first,ef.showingFrom)}if(ef.showingTo>dY&&ef.showingTo-dY<20){dY=Math.min(d1,ef.showingTo)}if(dt){ee=l(aH(em,dm(em,ee)));while(dY<d1&&bc(em,dm(em,dY))){++dY}}var eh=[{from:Math.max(ef.showingFrom,em.first),to:Math.min(ef.showingTo,d1)}];if(eh[0].from>=eh[0].to){eh=[]}else{eh=cn(eh,el)}if(dt){for(var eg=0;eg<eh.length;++eg){var d8=eh[eg],ei;while(ei=I(dm(em,d8.to-1))){var ek=ei.find().from.line;if(ek>d8.from){d8.to=ek}else{eh.splice(eg--,1);break}}}}var eb=0;for(var eg=0;eg<eh.length;++eg){var d8=eh[eg];if(d8.from<ee){d8.from=ee}if(d8.to>dY){d8.to=dY}if(d8.from>=d8.to){eh.splice(eg--,1)}else{eb+=d8.to-d8.from}}if(eb==dY-ee&&ee==ef.showingFrom&&dY==ef.showingTo){al(d3);return}eh.sort(function(eo,en){return eo.from-en.from});var d4=document.activeElement;if(eb<(dY-ee)*0.7){ef.lineDiv.style.display="none"}am(d3,ee,dY,eh,d0);ef.lineDiv.style.display="";if(document.activeElement!=d4&&d4.offsetHeight){d4.focus()}var d9=ee!=ef.showingFrom||dY!=ef.showingTo||ef.lastSizeC!=ef.wrapper.clientHeight;if(d9){ef.lastSizeC=ef.wrapper.clientHeight}ef.showingFrom=ee;ef.showingTo=dY;bK(d3,100);var d2=ef.lineDiv.offsetTop;for(var ed=ef.lineDiv.firstChild,ea;ed;ed=ed.nextSibling){if(ed.lineObj){if(cb){var d7=ed.offsetTop+ed.offsetHeight;ea=d7-d2;d2=d7}else{var d5=t(ed);ea=d5.bottom-d5.top}var d6=ed.lineObj.height-ea;if(ea<2){ea=b0(ef)}if(d6>0.001||d6<-0.001){aO(ed.lineObj,ea);var ec=ed.lineObj.widgets;if(ec){for(var eg=0;eg<ec.length;++eg){ec[eg].height=ec[eg].node.offsetHeight}}}}}al(d3);if(bG(ef,em,dX).to>dY){bC(d3,[],dX)}return true}function al(dX){var dY=dX.display.viewOffset=cg(dX,dm(dX.doc,dX.display.showingFrom));dX.display.mover.style.top=dY+"px"}function cn(d6,d4){for(var d1=0,dZ=d4.length||0;d1<dZ;++d1){var d3=d4[d1],dX=[],d5=d3.diff||0;for(var d0=0,dY=d6.length;d0<dY;++d0){var d2=d6[d0];if(d3.to<=d2.from&&d3.diff){dX.push({from:d2.from+d5,to:d2.to+d5})}else{if(d3.to<=d2.from||d3.from>=d2.to){dX.push(d2)}else{if(d3.from>d2.from){dX.push({from:d2.from,to:d3.from})}if(d3.to<d2.to){dX.push({from:d3.to+d5,to:d2.to+d5})}}}}d6=dX}return d6}function cS(dX){var d1=dX.display,d0={},dZ={};for(var d2=d1.gutters.firstChild,dY=0;d2;d2=d2.nextSibling,++dY){d0[dX.options.gutters[dY]]=d2.offsetLeft;dZ[dX.options.gutters[dY]]=d2.offsetWidth}return{fixedPos:dS(d1),gutterTotalWidth:d1.gutters.offsetWidth,gutterLeft:d0,gutterWidth:dZ,wrapperWidth:d1.wrapper.clientWidth}}function am(d6,d3,d4,d9,dY){var d5=cS(d6);var d2=d6.display,d8=d6.options.lineNumbers;if(!d9.length&&(!P||!d6.display.currentWheelTarget)){cR(d2.lineDiv)}var dX=d2.lineDiv,d7=dX.firstChild;function d1(eb){var ea=eb.nextSibling;if(P&&a5&&d6.display.currentWheelTarget==eb){eb.style.display="none";eb.lineObj=null}else{eb.parentNode.removeChild(eb)}return ea}var dZ=d9.shift(),d0=d3;d6.doc.iter(d3,d4,function(ei){if(dZ&&dZ.to==d0){dZ=d9.shift()}if(bc(d6.doc,ei)){if(ei.height!=0){aO(ei,0)}if(ei.widgets&&d7.previousSibling){for(var ee=0;ee<ei.widgets.length;++ee){if(ei.widgets[ee].showIfHidden){var ec=d7.previousSibling;if(/pre/i.test(ec.nodeName)){var eb=bH("div",null,null,"position: relative");ec.parentNode.replaceChild(eb,ec);eb.appendChild(ec);ec=eb}var eg=ec.appendChild(bH("div",[ei.widgets[ee].node],"CodeMirror-linewidget"));bk(ei.widgets[ee],eg,ec,d5)}}}}else{if(dZ&&dZ.from<=d0&&dZ.to>d0){while(d7.lineObj!=ei){d7=d1(d7)}if(d8&&dY<=d0&&d7.lineNumber){aZ(d7.lineNumber,c2(d6.options,d0))}d7=d7.nextSibling}else{if(ei.widgets){for(var ed=0,eh=d7,ef;eh&&ed<20;++ed,eh=eh.nextSibling){if(eh.lineObj==ei&&/div/i.test(eh.nodeName)){ef=eh;break}}}var ea=aK(d6,ei,d0,d5,ef);if(ea!=ef){dX.insertBefore(ea,d7)}else{while(d7!=ef){d7=d1(d7)}d7=d7.nextSibling}ea.lineObj=ei}}++d0});while(d7){d7=d1(d7)}}function aK(d2,d5,d6,d9,dY){var ef=bW(d2,d5);var ei=d5.gutterMarkers,eg=d2.display,d3;if(!d2.options.lineNumbers&&!ei&&!d5.bgClass&&!d5.wrapClass&&!d5.widgets){return ef}if(dY){dY.alignable=null;var ej=true,dZ=0;for(var eb=dY.firstChild,ea;eb;eb=ea){ea=eb.nextSibling;if(!/\bCodeMirror-linewidget\b/.test(eb.className)){dY.removeChild(eb)}else{for(var eh=0,d1=true;eh<d5.widgets.length;++eh){var d0=d5.widgets[eh],d4=false;if(!d0.above){d4=d1;d1=false}if(d0.node==eb.firstChild){bk(d0,eb,dY,d9);++dZ;if(d4){dY.insertBefore(ef,eb)}break}}if(eh==d5.widgets.length){ej=false;break}}}if(ej&&dZ==d5.widgets.length){d3=dY;dY.className=d5.wrapClass||""}}if(!d3){d3=bH("div",null,d5.wrapClass,"position: relative");d3.appendChild(ef)}if(d5.bgClass){d3.insertBefore(bH("div","\u00a0",d5.bgClass+" CodeMirror-linebackground"),d3.firstChild)}if(d2.options.lineNumbers||ei){var ed=d3.insertBefore(bH("div",null,null,"position: absolute; left: "+(d2.options.fixedGutter?d9.fixedPos:-d9.gutterTotalWidth)+"px"),d3.firstChild);if(d2.options.fixedGutter){(d3.alignable||(d3.alignable=[])).push(ed)}if(d2.options.lineNumbers&&(!ei||!ei["CodeMirror-linenumbers"])){d3.lineNumber=ed.appendChild(bH("div",c2(d2.options,d6),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d9.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+eg.lineNumInnerWidth+"px"))}if(ei){for(var ee=0;ee<d2.options.gutters.length;++ee){var d8=d2.options.gutters[ee],d7=ei.hasOwnProperty(d8)&&ei[d8];if(d7){ed.appendChild(bH("div",[d7],"CodeMirror-gutter-elt","left: "+d9.gutterLeft[d8]+"px; width: "+d9.gutterWidth[d8]+"px"))}}}}if(cb){d3.style.zIndex=2}if(d5.widgets&&d3!=dY){for(var eh=0,dX=d5.widgets;eh<dX.length;++eh){var d0=dX[eh],ec=bH("div",[d0.node],"CodeMirror-linewidget");bk(d0,ec,d3,d9);if(d0.above){d3.insertBefore(ec,d2.options.lineNumbers&&d5.height!=0?ed:ef)}else{d3.appendChild(ec)}ce(d0,"redraw")}}return d3}function bk(d0,dZ,dY,d1){if(d0.noHScroll){(dY.alignable||(dY.alignable=[])).push(dZ);var dX=d1.wrapperWidth;dZ.style.left=d1.fixedPos+"px";if(!d0.coverGutter){dX-=d1.gutterTotalWidth;dZ.style.paddingLeft=d1.gutterTotalWidth+"px"}dZ.style.width=dX+"px"}if(d0.coverGutter){dZ.style.zIndex=5;dZ.style.position="relative";if(!d0.noHScroll){dZ.style.marginLeft=-d1.gutterTotalWidth+"px"}}}function dR(dX){var d0=dX.display;var d1=o(dX.doc.sel.from,dX.doc.sel.to);if(d1||dX.options.showCursorWhenSelecting){dT(dX)}else{d0.cursor.style.display=d0.otherCursor.style.display="none"}if(!d1){bv(dX)}else{d0.selectionDiv.style.display="none"}var d2=bU(dX,dX.doc.sel.head,"div");var dY=t(d0.wrapper),dZ=t(d0.lineDiv);d0.inputDiv.style.top=Math.max(0,Math.min(d0.wrapper.clientHeight-10,d2.top+dZ.top-dY.top))+"px";d0.inputDiv.style.left=Math.max(0,Math.min(d0.wrapper.clientWidth-10,d2.left+dZ.left-dY.left))+"px"}function dT(dX){var dY=dX.display,dZ=bU(dX,dX.doc.sel.head,"div");dY.cursor.style.left=dZ.left+"px";dY.cursor.style.top=dZ.top+"px";dY.cursor.style.height=Math.max(0,dZ.bottom-dZ.top)*dX.options.cursorHeight+"px";dY.cursor.style.display="";if(dZ.other){dY.otherCursor.style.display="";dY.otherCursor.style.left=dZ.other.left+"px";dY.otherCursor.style.top=dZ.other.top+"px";dY.otherCursor.style.height=(dZ.other.bottom-dZ.other.top)*0.85+"px"}else{dY.otherCursor.style.display="none"}}function bv(d1){var d8=d1.display,ef=d1.doc,d7=d1.doc.sel;var dX=document.createDocumentFragment();var ea=d8.lineSpace.offsetWidth,eb=aW(d1.display);function d3(ej,ei,eh,eg){if(ei<0){ei=0}dX.appendChild(bH("div",null,"CodeMirror-selected","position: absolute; left: "+ej+"px; top: "+ei+"px; width: "+(eh==null?ea-ej:eh)+"px; height: "+(eg-ei)+"px"))}function dZ(eg,ej,en,em){var eh=dm(ef,eg);var ek=eh.text.length,ei=em?Infinity:-Infinity;function el(eo){return dr(d1,dP(eg,eo),"div",eh)}dy(cq(eh),ej||0,en==null?ek:en,function(eu,et,eo){var eq=el(eo=="rtl"?et-1:eu);var er=el(eo=="rtl"?eu:et-1);var es=eq.left,ep=er.right;if(er.top-eq.top>3){d3(es,eq.top,null,eq.bottom);es=eb;if(eq.bottom<er.top){d3(es,eq.bottom,null,er.top)}}if(en==null&&et==ek){ep=ea}if(ej==null&&eu==0){es=eb}ei=em?Math.min(er.top,ei):Math.max(er.bottom,ei);if(es<eb+1){es=eb}d3(es,er.top,ep-es,er.bottom)});return ei}if(d7.from.line==d7.to.line){dZ(d7.from.line,d7.from.ch,d7.to.ch)}else{var ee=dm(ef,d7.from.line);var d0=ee,ec,d5=[d7.from.line,d7.from.ch],dY;while(ec=I(d0)){var d2=ec.find();d5.push(d2.from.ch,d2.to.line,d2.to.ch);if(d2.to.line==d7.to.line){d5.push(d7.to.ch);dY=true;break}d0=dm(ef,d2.to.line)}if(dY){for(var d9=0;d9<d5.length;d9+=3){dZ(d5[d9],d5[d9+1],d5[d9+2])}}else{var d6,d4,ed=dm(ef,d7.to.line);if(d7.from.ch){d6=dZ(d7.from.line,d7.from.ch,null,false)}else{d6=cg(d1,ee)-d8.viewOffset}if(!d7.to.ch){d4=cg(d1,ed)-d8.viewOffset}else{d4=dZ(d7.to.line,ds(ed)?null:0,d7.to.ch,true)}if(d6<d4){d3(eb,d6,null,d4)}}}cZ(d8.selectionDiv,dX);d8.selectionDiv.style.display=""}function dz(dX){var dZ=dX.display;clearInterval(dZ.blinker);var dY=true;dZ.cursor.style.visibility=dZ.otherCursor.style.visibility="";dZ.blinker=setInterval(function(){if(!dZ.cursor.offsetHeight){return}dZ.cursor.style.visibility=dZ.otherCursor.style.visibility=(dY=!dY)?"":"hidden"},dX.options.cursorBlinkRate)}function bK(dX,dY){if(dX.doc.mode.startState&&dX.doc.frontier<dX.display.showingTo){dX.state.highlight.set(dY,b4(b9,dX))}}function b9(dX){var d0=dX.doc;if(d0.frontier<d0.first){d0.frontier=d0.first}if(d0.frontier>=dX.display.showingTo){return}var dY=+new Date+dX.options.workTime;var dZ=f(d0.mode,c8(dX,d0.frontier));var d2=[],d1;d0.iter(d0.frontier,Math.min(d0.first+d0.size,dX.display.showingTo+500),function(d3){if(d0.frontier>=dX.display.showingFrom){var d5=d3.styles;d3.styles=a(dX,d3,dZ);var d6=!d5||d5.length!=d3.styles.length;for(var d4=0;!d6&&d4<d5.length;++d4){d6=d5[d4]!=d3.styles[d4]}if(d6){if(d1&&d1.end==d0.frontier){d1.end++}else{d2.push(d1={start:d0.frontier,end:d0.frontier+1})}}d3.stateAfter=f(d0.mode,dZ)}else{ci(dX,d3,dZ);d3.stateAfter=d0.frontier%5==0?f(d0.mode,dZ):null}++d0.frontier;if(+new Date>dY){bK(dX,dX.options.workDelay);return true}});if(d2.length){j(dX,function(){for(var d3=0;d3<d2.length;++d3){bR(this,d2[d3].start,d2[d3].end)}})()}}function aY(d2,dX){var dY,d0,d1=d2.doc;for(var d4=dX,dZ=dX-100;d4>dZ;--d4){if(d4<=d1.first){return d1.first}var d5=dm(d1,d4-1);if(d5.stateAfter){return d4}var d3=dQ(d5.text,null,d2.options.tabSize);if(d0==null||dY>d3){d0=d4-1;dY=d3}}return d0}function c8(dX,d2){var d0=dX.doc,dZ=dX.display;if(!d0.mode.startState){return true}var d1=aY(dX,d2),dY=d1>d0.first&&dm(d0,d1-1).stateAfter;if(!dY){dY=a1(d0.mode)}else{dY=f(d0.mode,dY)}d0.iter(d1,d2,function(d3){ci(dX,d3,dY);var d4=d1==d2-1||d1%5==0||d1>=dZ.showingFrom&&d1<dZ.showingTo;d3.stateAfter=d4?f(d0.mode,dY):null;++d1});return dY}function c6(dX){return dX.lineSpace.offsetTop}function aW(dY){var dX=cZ(dY.measure,bH("pre",null,null,"text-align: left")).appendChild(bH("span","x"));return dX.offsetLeft}function aI(dX,dY,d0,d2){var dZ=-1;d2=d2||cB(dX,dY);for(var d3=d0;;d3+=dZ){var d1=d2[d3];if(d1){break}if(dZ<0&&d3==0){dZ=1}}return{left:d3<d0?d1.right:d1.left,right:d3>d0?d1.left:d1.right,top:d1.top,bottom:d1.bottom}}function cB(dX,dY){var d3=dX.display,d0=dX.display.measureLineCache;for(var d1=0;d1<d0.length;++d1){var dZ=d0[d1];if(dZ.text==dY.text&&dZ.markedSpans==dY.markedSpans&&d3.scroller.clientWidth==dZ.width&&dZ.classes==dY.textClass+"|"+dY.bgClass+"|"+dY.wrapClass){return dZ.measure}}var d2=aJ(dX,dY);var dZ={text:dY.text,width:d3.scroller.clientWidth,markedSpans:dY.markedSpans,measure:d2,classes:dY.textClass+"|"+dY.bgClass+"|"+dY.wrapClass};if(d0.length==16){d0[++d3.measureLineCachePos%16]=dZ}else{d0.push(dZ)}return d2}function aJ(d2,d5){var eg=d2.display,d1=dI(d5.text.length);var ed=bW(d2,d5,d1);if(ao&&!cb&&!d2.options.lineWrapping&&ed.childNodes.length>100){var dZ=document.createDocumentFragment();var d6=10,ee=ed.childNodes.length;for(var ei=0,d8=Math.ceil(ee/d6);ei<d8;++ei){var d4=bH("div",null,null,"display: inline-block");for(var eh=0;eh<d6&&ee;++eh){d4.appendChild(ed.firstChild);--ee}dZ.appendChild(d4)}ed.appendChild(dZ)}cZ(eg.measure,ed);var dY=t(eg.lineDiv);var dX=[],el=dI(d5.text.length),ek=ed.offsetHeight;if(ca&&eg.measure.first!=ed){cZ(eg.measure,ed)}for(var ei=0,d0;ei<d1.length;++ei){if(d0=d1[ei]){var ec=t(d0);var eb=Math.max(0,ec.top-dY.top),d9=Math.min(ec.bottom-dY.top,ek);for(var eh=0;eh<dX.length;eh+=2){var ea=dX[eh],d7=dX[eh+1];if(ea>d9||d7<eb){continue}if(ea<=eb&&d7>=d9||eb<=ea&&d9>=d7||Math.min(d9,d7)-Math.max(eb,ea)>=(d9-eb)>>1){dX[eh]=Math.min(eb,ea);dX[eh+1]=Math.max(d9,d7);break}}if(eh==dX.length){dX.push(eb,d9)}var ej=ec.right;if(d0.measureRight){ej=t(d0.measureRight).left}el[ei]={left:ec.left-dY.left,right:ej-dY.left,top:eh}}}for(var ei=0,d0;ei<el.length;++ei){if(d0=el[ei]){var ef=d0.top;d0.top=dX[ef];d0.bottom=dX[ef+1]}}if(!d2.options.lineWrapping){var d3=ed.lastChild;if(d3.nodeType==3){d3=ed.appendChild(bH("span","\u200b"))}el.width=t(d3).right-dY.left}return el}function c0(dX){dX.display.measureLineCache.length=dX.display.measureLineCachePos=0;dX.display.cachedCharWidth=dX.display.cachedTextHeight=null;dX.display.maxLineChanged=true;dX.display.lineNumChars=null}function A(d3,d0,d2,dY){if(d0.widgets){for(var dZ=0;dZ<d0.widgets.length;++dZ){if(d0.widgets[dZ].above){var d5=ax(d0.widgets[dZ]);d2.top+=d5;d2.bottom+=d5}}}if(dY=="line"){return d2}if(!dY){dY="local"}var d1=cg(d3,d0);if(dY!="local"){d1-=d3.display.viewOffset}if(dY=="page"){var dX=t(d3.display.lineSpace);d1+=dX.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var d4=dX.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);d2.left+=d4;d2.right+=d4}d2.top+=d1;d2.bottom+=d1;return d2}function dr(dX,d0,dZ,dY){if(!dY){dY=dm(dX.doc,d0.line)}return A(dX,dY,aI(dX,dY,d0.ch),dZ)}function bU(d6,d3,dZ,dY,d8){dY=dY||dm(d6.doc,d3.line);if(!d8){d8=cB(d6,dY)}function ed(eh,eg){var ef=aI(d6,dY,eh,d8);if(eg){ef.left=ef.right}else{ef.right=ef.left}return A(d6,dY,ef,dZ)}var ea=cq(dY),d7=d3.ch;if(!ea){return ed(d7)}var d4,d2,ee=ea[0].level;for(var eb=0;eb<ea.length;++eb){var d9=ea[eb],d1=d9.level%2,d5,dX;if(d9.from<d7&&d9.to>d7){return ed(d7,d1)}var d0=d1?d9.to:d9.from,ec=d1?d9.from:d9.to;if(d0==d7){if(eb&&d9.level<(d5=ea[eb-1]).level){dX=ed(d5.level%2?d5.from:d5.to-1,true)}else{dX=ed(d1&&d9.from!=d9.to?d7-1:d7)}if(d1==ee){d4=dX}else{d2=dX}}else{if(ec==d7){var d5=eb<ea.length-1&&ea[eb+1];if(!d1&&d5&&d5.from==d5.to){continue}if(d5&&d9.level<d5.level){dX=ed(d5.level%2?d5.to-1:d5.from)}else{dX=ed(d1?d7:d7-1,true)}if(d1==ee){d4=dX}else{d2=dX}}}}if(ee&&!d7){d2=ed(ea[0].to-1)}if(!d4){return d2}if(d2){d4.other=d2}return d4}function cW(dX,dY,dZ){var d0=new dP(dX,dY);if(dZ){d0.outside=true}return d0}function bL(d4,d1,d0){var d3=d4.doc;d0+=d4.display.viewOffset;if(d0<0){return cW(d3.first,0,true)}var dY=ba(d3,d0),d5=d3.first+d3.size-1;if(dY>d5){return cW(d3.first+d3.size-1,dm(d3,d5).text.length,true)}if(d1<0){d1=0}for(;;){var dZ=dm(d3,dY);var d6=aG(d4,dZ,dY,d1,d0);var d2=I(dZ);var dX=d2&&d2.find();if(d2&&d6.ch>=dX.from.ch){dY=dX.to.line}else{return d6}}}function aG(d8,dZ,eb,ea,d9){var d7=d9-cg(d8,dZ);var d4=false,el=d8.display.wrapper.clientWidth;var eg=cB(d8,dZ);function ej(em){var en=bU(d8,dP(eb,em),"line",dZ,eg);d4=true;if(d7>en.bottom){return Math.max(0,en.left-el)}else{if(d7<en.top){return en.left+el}else{d4=false}}return en.left}var ed=cq(dZ),ef=dZ.text.length;var eh=br(dZ),d0=cM(dZ);var ee=ej(eh),dX=d4,dY=ej(d0),d3=d4;if(ea>dY){return cW(eb,d0,d3)}for(;;){if(ed?d0==eh||d0==bZ(dZ,eh,1):d0-eh<=1){var d2=ea-ee<dY-ea,ec=d2?eh:d0;while(cr.test(dZ.text.charAt(ec))){++ec}var d6=cW(eb,ec,d2?dX:d3);d6.after=d2;return d6}var d5=Math.ceil(ef/2),ek=eh+d5;if(ed){ek=eh;for(var ei=0;ei<d5;++ei){ek=bZ(dZ,ek,1)}}var d1=ej(ek);if(d1>ea){d0=ek;dY=d1;if(d3=d4){dY+=1000}ef-=d5}else{eh=ek;ee=d1;dX=d4;ef=d5}}}var cc;function b0(dZ){if(dZ.cachedTextHeight!=null){return dZ.cachedTextHeight}if(cc==null){cc=bH("pre");for(var dY=0;dY<49;++dY){cc.appendChild(document.createTextNode("x"));cc.appendChild(bH("br"))}cc.appendChild(document.createTextNode("x"))}cZ(dZ.measure,cc);var dX=cc.offsetHeight/50;if(dX>3){dZ.cachedTextHeight=dX}cR(dZ.measure);return dX||1}function a6(d0){if(d0.cachedCharWidth!=null){return d0.cachedCharWidth}var dX=bH("span","x");var dZ=bH("pre",[dX]);cZ(d0.measure,dZ);var dY=dX.offsetWidth;if(dY>2){d0.cachedCharWidth=dY}return dY||10}var dL=0;function aa(dX){dX.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:false,updateMaxLine:false,updateScrollPos:false,id:++dL};if(!cd++){dv=[]}}function B(d9){var d4=d9.curOp,d8=d9.doc,d5=d9.display;d9.curOp=null;if(d4.updateMaxLine){bB(d9)}if(d5.maxLineChanged&&!d9.options.lineWrapping){var dY=cB(d9,d5.maxLine).width;d5.sizer.style.minWidth=Math.max(0,dY+3+c7)+"px";d5.maxLineChanged=false;var d6=Math.max(0,d5.sizer.offsetLeft+d5.sizer.offsetWidth-d5.scroller.clientWidth);if(d6<d8.scrollLeft&&!d4.updateScrollPos){W(d9,Math.min(d5.scroller.scrollLeft,d6),true)}}var dZ,d2;if(d4.updateScrollPos){dZ=d4.updateScrollPos}else{if(d4.selectionChanged&&d5.scroller.clientHeight){var d7=bU(d9,d8.sel.head);dZ=aB(d9,d7.left,d7.top,d7.left,d7.bottom)}}if(d4.changes.length||dZ&&dZ.scrollTop!=null){d2=cL(d9,d4.changes,dZ&&dZ.scrollTop)}if(!d2&&d4.selectionChanged){dR(d9)}if(d4.updateScrollPos){d5.scroller.scrollTop=d5.scrollbarV.scrollTop=d8.scrollTop=dZ.scrollTop;d5.scroller.scrollLeft=d5.scrollbarH.scrollLeft=d8.scrollLeft=dZ.scrollLeft;ad(d9)}else{if(dZ){cO(d9)}}if(d4.selectionChanged){dz(d9)}if(d9.state.focused&&d4.updateInput){dg(d9,d4.userSelChange)}var d3=d4.maybeHiddenMarkers,dX=d4.maybeUnhiddenMarkers;if(d3){for(var d1=0;d1<d3.length;++d1){if(!d3[d1].lines.length){af(d3[d1],"hide")}}}if(dX){for(var d1=0;d1<dX.length;++d1){if(dX[d1].lines.length){af(dX[d1],"unhide")}}}var d0;if(!--cd){d0=dv;dv=null}if(d4.textChanged){af(d9,"change",d9,d4.textChanged)}if(d4.selectionChanged){af(d9,"cursorActivity",d9)}if(d0){for(var d1=0;d1<d0.length;++d1){d0[d1]()}}}function j(dX,dY){return function(){var d0=dX||this,d1=!d0.curOp;if(d1){aa(d0)}try{var dZ=dY.apply(d0,arguments)}finally{if(d1){B(d0)}}return dZ}}function cw(dX){return function(){var dZ=this.cm&&!this.cm.curOp,dY;if(dZ){aa(this.cm)}try{dY=dX.apply(this,arguments)}finally{if(dZ){B(this.cm)}}return dY}}function cv(dY,d0){var dZ=!dY.curOp,dX;if(dZ){aa(dY)}try{dX=d0()}finally{if(dZ){B(dY)}}return dX}function bR(dX,d0,dZ,dY){if(d0==null){d0=dX.doc.first}if(dZ==null){dZ=dX.doc.first+dX.doc.size}dX.curOp.changes.push({from:d0,to:dZ,diff:dY})}function d(dX){if(dX.display.pollingFast){return}dX.display.poll.set(dX.options.pollInterval,function(){bO(dX);if(dX.state.focused){d(dX)}})}function ag(dX){var dY=false;dX.display.pollingFast=true;function dZ(){var d0=bO(dX);if(!d0&&!dY){dY=true;dX.display.poll.set(60,dZ)}else{dX.display.pollingFast=false;d(dX)}}dX.display.poll.set(20,dZ)}function bO(d7){var d3=d7.display.input,d0=d7.display.prevInput,d6=d7.doc,dX=d6.sel;if(!d7.state.focused||cA(d3)||C(d7)){return false}var d8=d3.value;if(d8==d0&&o(dX.from,dX.to)){return false}if(ao&&d8&&d3.selectionStart===0){dg(d7,true);return false}var dZ=!d7.curOp;if(dZ){aa(d7)}dX.shift=false;var d2=0,dY=Math.min(d0.length,d8.length);while(d2<dY&&d0[d2]==d8[d2]){++d2}var d5=dX.from,d4=dX.to;if(d2<d0.length){d5=dP(d5.line,d5.ch-(d0.length-d2))}else{if(d7.state.overwrite&&o(d5,d4)&&!d7.state.pasteIncoming){d4=dP(d4.line,Math.min(dm(d6,d4.line).text.length,d4.ch+(d8.length-d2)))}}var d1=d7.curOp.updateInput;cE(d7.doc,{from:d5,to:d4,text:cY(d8.slice(d2)),origin:d7.state.pasteIncoming?"paste":"+input"},"end");d7.curOp.updateInput=d1;if(d8.length>1000){d3.value=d7.display.prevInput=""}else{d7.display.prevInput=d8}if(dZ){B(d7)}d7.state.pasteIncoming=false;return true}function dg(dX,dZ){var dY,d0,d1=dX.doc;if(!o(d1.sel.from,d1.sel.to)){dX.display.prevInput="";dY=bF&&(d1.sel.to.line-d1.sel.from.line>100||(d0=dX.getSelection()).length>1000);if(dY){dX.display.input.value="-"}else{dX.display.input.value=d0||dX.getSelection()}if(dX.state.focused){bP(dX.display.input)}}else{if(dZ){dX.display.prevInput=dX.display.input.value=""}}dX.display.inaccurateSelection=dY}function bE(dX){if(dX.options.readOnly!="nocursor"&&(!bN||document.activeElement!=dX.display.input)){dX.display.input.focus()}}function C(dX){return dX.options.readOnly||dX.doc.cantEdit}function s(dX){var d2=dX.display;cC(d2.scroller,"mousedown",j(dX,cT));cC(d2.scroller,"dblclick",j(dX,X));cC(d2.lineSpace,"selectstart",function(d4){if(!Z(d2,d4)){X(d4)}});if(!cU){cC(d2.scroller,"contextmenu",function(d4){aM(dX,d4)})}cC(d2.scroller,"scroll",function(){cP(dX,d2.scroller.scrollTop);W(dX,d2.scroller.scrollLeft,true);af(dX,"scroll",dX)});cC(d2.scrollbarV,"scroll",function(){cP(dX,d2.scrollbarV.scrollTop)});cC(d2.scrollbarH,"scroll",function(){W(dX,d2.scrollbarH.scrollLeft)});cC(d2.scroller,"mousewheel",function(d4){ct(dX,d4)});cC(d2.scroller,"DOMMouseScroll",function(d4){ct(dX,d4)});function d3(){if(dX.state.focused){setTimeout(b4(bE,dX),0)}}cC(d2.scrollbarH,"mousedown",d3);cC(d2.scrollbarV,"mousedown",d3);cC(d2.wrapper,"scroll",function(){d2.wrapper.scrollTop=d2.wrapper.scrollLeft=0});function d0(){d2.cachedCharWidth=d2.cachedTextHeight=null;c0(dX);cv(dX,b4(bR,dX))}cC(window,"resize",d0);function dZ(){for(var d4=d2.wrapper.parentNode;d4&&d4!=document.body;d4=d4.parentNode){}if(d4){setTimeout(dZ,5000)}else{dK(window,"resize",d0)}}setTimeout(dZ,5000);cC(d2.input,"keyup",j(dX,function(d4){if(dX.options.onKeyEvent&&dX.options.onKeyEvent(dX,k(d4))){return}if(d4.keyCode==16){dX.doc.sel.shift=false}}));cC(d2.input,"input",b4(ag,dX));cC(d2.input,"keydown",j(dX,cK));cC(d2.input,"keypress",j(dX,bg));cC(d2.input,"focus",b4(dN,dX));cC(d2.input,"blur",b4(O,dX));function dY(d4){if(dX.options.onDragEvent&&dX.options.onDragEvent(dX,k(d4))){return}c3(d4)}if(dX.options.dragDrop){cC(d2.scroller,"dragstart",function(d4){Q(dX,d4)});cC(d2.scroller,"dragenter",dY);cC(d2.scroller,"dragover",dY);cC(d2.scroller,"drop",j(dX,e))}cC(d2.scroller,"paste",function(d4){if(Z(d2,d4)){return}bE(dX);ag(dX)});cC(d2.input,"paste",function(){dX.state.pasteIncoming=true;ag(dX)});function d1(){if(d2.inaccurateSelection){d2.prevInput="";d2.inaccurateSelection=false;d2.input.value=dX.getSelection();bP(d2.input)}}cC(d2.input,"cut",d1);cC(d2.input,"copy",d1);if(ac){cC(d2.sizer,"mouseup",function(){if(document.activeElement==d2.input){d2.input.blur()}bE(dX)})}}function Z(dY,dX){for(var dZ=bX(dX);dZ!=dY.wrapper;dZ=dZ.parentNode){if(!dZ){return true}if(/\bCodeMirror-(?:line)?widget\b/.test(dZ.className)||dZ.parentNode==dY.sizer&&dZ!=dY.mover){return true}}}function aQ(dY,d3,d0){var d2=dY.display;if(!d0){var d1=bX(d3);if(d1==d2.scrollbarH||d1==d2.scrollbarH.firstChild||d1==d2.scrollbarV||d1==d2.scrollbarV.firstChild||d1==d2.scrollbarFiller){return null}}var dX,d4,dZ=t(d2.lineSpace);try{dX=d3.clientX;d4=d3.clientY}catch(d3){return null}return bL(dY,dX-dZ.left,d4-dZ.top)}var bm,aE;function cT(ee){var d0=this,d9=d0.display,eg=d0.doc,d8=eg.sel;d8.shift=ee.shiftKey;if(Z(d9,ee)){if(!P){d9.scroller.draggable=false;setTimeout(function(){d9.scroller.draggable=true},100)}return}if(ae(d0,ee)){return}var dZ=aQ(d0,ee);switch(aN(ee)){case 3:if(cU){aM.call(d0,d0,ee)}return;case 2:if(dZ){dD(d0.doc,dZ)}setTimeout(b4(bE,d0),20);X(ee);return}if(!dZ){if(bX(ee)==d9.scroller){X(ee)}return}if(!d0.state.focused){dN(d0)}var dX=+new Date,dY="single";if(aE&&aE.time>dX-400&&o(aE.pos,dZ)){dY="triple";X(ee);setTimeout(b4(bE,d0),20);S(d0,dZ.line)}else{if(bm&&bm.time>dX-400&&o(bm.pos,dZ)){dY="double";aE={time:dX,pos:dZ};X(ee);var eb=bs(dm(eg,dZ.line).text,dZ);dD(d0.doc,eb.from,eb.to)}else{bm={time:dX,pos:dZ}}}var d1=dZ;if(d0.options.dragDrop&&cx&&!C(d0)&&!o(d8.from,d8.to)&&!D(dZ,d8.from)&&!D(d8.to,dZ)&&dY=="single"){var ea=j(d0,function(eh){if(P){d9.scroller.draggable=false}d0.state.draggingText=false;dK(document,"mouseup",ea);dK(d9.scroller,"drop",ea);if(Math.abs(ee.clientX-eh.clientX)+Math.abs(ee.clientY-eh.clientY)<10){X(eh);dD(d0.doc,dZ);bE(d0)}});if(P){d9.scroller.draggable=true}d0.state.draggingText=ea;if(d9.scroller.dragDrop){d9.scroller.dragDrop()}cC(document,"mouseup",ea);cC(d9.scroller,"drop",ea);return}X(ee);if(dY=="single"){dD(d0.doc,ap(eg,dZ))}var ef=d8.from,d5=d8.to;function ec(ei){if(dY=="single"){dD(d0.doc,ap(eg,dZ),ei);return}ef=ap(eg,ef);d5=ap(eg,d5);if(dY=="double"){var eh=bs(dm(eg,ei.line).text,ei);if(D(ei,ef)){dD(d0.doc,eh.from,d5)}else{dD(d0.doc,ef,eh.to)}}else{if(dY=="triple"){if(D(ei,ef)){dD(d0.doc,d5,ap(eg,dP(ei.line,0)))}else{dD(d0.doc,ef,ap(eg,dP(ei.line+1,0)))}}}}var d6=t(d9.wrapper);var d2=0;function ed(ej){var eh=++d2;var el=aQ(d0,ej,true);if(!el){return}if(!o(el,d1)){if(!d0.state.focused){dN(d0)}d1=el;ec(el);var ek=bG(d9,eg);if(el.line>=ek.to||el.line<ek.from){setTimeout(j(d0,function(){if(d2==eh){ed(ej)}}),150)}}else{var ei=ej.clientY<d6.top?-20:ej.clientY>d6.bottom?20:0;if(ei){setTimeout(j(d0,function(){if(d2!=eh){return}d9.scroller.scrollTop+=ei;ed(ej)}),50)}}}function d4(eh){d2=Infinity;var ei=aQ(d0,eh);if(ei){ec(ei)}X(eh);bE(d0);dK(document,"mousemove",d7);dK(document,"mouseup",d3)}var d7=j(d0,function(eh){if(!ao&&!aN(eh)){d4(eh)}else{ed(eh)}});var d3=j(d0,d4);cC(document,"mousemove",d7);cC(document,"mouseup",d3)}function e(d3){var d5=this;if(Z(d5.display,d3)||(d5.options.onDragEvent&&d5.options.onDragEvent(d5,k(d3)))){return}X(d3);var d4=aQ(d5,d3,true),dX=d3.dataTransfer.files;if(!d4||C(d5)){return}if(dX&&dX.length&&window.FileReader&&window.File){var dZ=dX.length,d7=Array(dZ),dY=0;var d0=function(ea,d9){var d8=new FileReader;d8.onload=function(){d7[d9]=d8.result;if(++dY==dZ){d4=ap(d5.doc,d4);b2(d5.doc,d7.join(""),d4,"around","paste")}};d8.readAsText(ea)};for(var d1=0;d1<dZ;++d1){d0(dX[d1],d1)}}else{if(d5.state.draggingText&&!(D(d4,d5.doc.sel.from)||D(d5.doc.sel.to,d4))){d5.state.draggingText(d3);setTimeout(b4(bE,d5),20);return}try{var d7=d3.dataTransfer.getData("Text");if(d7){var d6=d5.doc.sel.from,d2=d5.doc.sel.to;bA(d5.doc,d4,d4);if(d5.state.draggingText){b2(d5.doc,"",d6,d2,"paste")}d5.replaceSelection(d7,null,"paste");bE(d5);dN(d5)}}catch(d3){}}}function ae(d5,d3){var d4=d5.display;try{var dY=d3.clientX,dX=d3.clientY}catch(d3){return false}if(dY>=Math.floor(t(d4.gutters).right)){return false}X(d3);if(!w(d5,"gutterClick")){return true}var d2=t(d4.lineDiv);if(dX>d2.bottom){return true}dX-=d2.top-d4.viewOffset;for(var d0=0;d0<d5.options.gutters.length;++d0){var d1=d4.gutters.childNodes[d0];if(d1&&t(d1).right>=dY){var d6=ba(d5.doc,dX);var dZ=d5.options.gutters[d0];ce(d5,"gutterClick",d5,d6,dZ,d3);break}}return true}function Q(dY,d0){if(Z(dY.display,d0)){return}var dX=dY.getSelection();d0.dataTransfer.setData("Text",dX);if(d0.dataTransfer.setDragImage&&!by){var dZ=bH("img",null,null,"position: fixed; left: 0; top: 0;");if(u){dZ.width=dZ.height=1;dY.display.wrapper.appendChild(dZ);dZ._top=dZ.offsetTop}d0.dataTransfer.setDragImage(dZ,0,0);if(u){dZ.parentNode.removeChild(dZ)}}}function cP(dX,dY){if(Math.abs(dX.doc.scrollTop-dY)<2){return}dX.doc.scrollTop=dY;if(!bt){cL(dX,[],dY)}if(dX.display.scroller.scrollTop!=dY){dX.display.scroller.scrollTop=dY}if(dX.display.scrollbarV.scrollTop!=dY){dX.display.scrollbarV.scrollTop=dY}if(bt){cL(dX,[])}}function W(dX,dZ,dY){if(dY?dZ==dX.doc.scrollLeft:Math.abs(dX.doc.scrollLeft-dZ)<2){return}dZ=Math.min(dZ,dX.display.scroller.scrollWidth-dX.display.scroller.clientWidth);dX.doc.scrollLeft=dZ;ad(dX);if(dX.display.scroller.scrollLeft!=dZ){dX.display.scroller.scrollLeft=dZ}if(dX.display.scrollbarH.scrollLeft!=dZ){dX.display.scrollbarH.scrollLeft=dZ}}var di=0,cV=null;if(ao){cV=-0.53}else{if(bt){cV=15}else{if(aD){cV=-0.7}else{if(by){cV=-1/3}}}}function ct(d3,dY){var d6=dY.wheelDeltaX,d5=dY.wheelDeltaY;if(d6==null&&dY.detail&&dY.axis==dY.HORIZONTAL_AXIS){d6=dY.detail}if(d5==null&&dY.detail&&dY.axis==dY.VERTICAL_AXIS){d5=dY.detail}else{if(d5==null){d5=dY.wheelDelta}}if(d5&&a5&&P){for(var d4=dY.target;d4!=d2;d4=d4.parentNode){if(d4.lineObj){d3.display.currentWheelTarget=d4;break}}}var d0=d3.display,d2=d0.scroller;if(d6&&!bt&&!u&&cV!=null){if(d5){cP(d3,Math.max(0,Math.min(d2.scrollTop+d5*cV,d2.scrollHeight-d2.clientHeight)))}W(d3,Math.max(0,Math.min(d2.scrollLeft+d6*cV,d2.scrollWidth-d2.clientWidth)));X(dY);d0.wheelStartX=null;return}if(d5&&cV!=null){var dX=d5*cV;var d1=d3.doc.scrollTop,dZ=d1+d0.wrapper.clientHeight;if(dX<0){d1=Math.max(0,d1+dX-50)}else{dZ=Math.min(d3.doc.height,dZ+dX+50)}cL(d3,[],{top:d1,bottom:dZ})}if(di<20){if(d0.wheelStartX==null){d0.wheelStartX=d2.scrollLeft;d0.wheelStartY=d2.scrollTop;d0.wheelDX=d6;d0.wheelDY=d5;setTimeout(function(){if(d0.wheelStartX==null){return}var d7=d2.scrollLeft-d0.wheelStartX;var d9=d2.scrollTop-d0.wheelStartY;var d8=(d9&&d0.wheelDY&&d9/d0.wheelDY)||(d7&&d0.wheelDX&&d7/d0.wheelDX);d0.wheelStartX=d0.wheelStartY=null;if(!d8){return}cV=(cV*di+d8)/(di+1);++di},200)}else{d0.wheelDX+=d6;d0.wheelDY+=d5}}}function a7(dY,d1,dX){if(typeof d1=="string"){d1=ay[d1];if(!d1){return false}}if(dY.display.pollingFast&&bO(dY)){dY.display.pollingFast=false}var d2=dY.doc,d0=d2.sel.shift,dZ=false;try{if(C(dY)){dY.state.suppressEdits=true}if(dX){d2.sel.shift=false}dZ=d1(dY)!=aS}finally{d2.sel.shift=d0;dY.state.suppressEdits=false}return dZ}function bh(dX){var dY=dX.state.keyMaps.slice(0);dY.push(dX.options.keyMap);if(dX.options.extraKeys){dY.unshift(dX.options.extraKeys)}return dY}var bI;function du(dX,d3){var dY=m(dX.options.keyMap),d1=dY.auto;clearTimeout(bI);if(d1&&!n(d3)){bI=setTimeout(function(){if(m(dX.options.keyMap)==dY){dX.options.keyMap=(d1.call?d1.call(null,dX):d1)}},50)}var d0=dC(d3,true),d2=false;if(!d0){return false}var dZ=bh(dX);if(d3.shiftKey){d2=au("Shift-"+d0,dZ,function(d4){return a7(dX,d4,true)})||au(d0,dZ,function(d4){if(typeof d4=="string"&&/^go[A-Z]/.test(d4)){return a7(dX,d4)}})}else{d2=au(d0,dZ,function(d4){return a7(dX,d4)})}if(d2=="stop"){d2=false}if(d2){X(d3);dz(dX);if(ca){d3.oldKeyCode=d3.keyCode;d3.keyCode=0}}return d2}function ck(dX,d0,dY){var dZ=au("'"+dY+"'",bh(dX),function(d1){return a7(dX,d1,true)});if(dZ){X(d0);dz(dX)}return dZ}var dp=null;function cK(d0){var dX=this;if(!dX.state.focused){dN(dX)}if(ao&&d0.keyCode==27){d0.returnValue=false}if(dX.options.onKeyEvent&&dX.options.onKeyEvent(dX,k(d0))){return}var dY=d0.keyCode;dX.doc.sel.shift=dY==16||d0.shiftKey;var dZ=du(dX,d0);if(u){dp=dZ?dY:null;if(!dZ&&dY==88&&!bF&&(a5?d0.metaKey:d0.ctrlKey)){dX.replaceSelection("")}}}function bg(d1){var dX=this;if(dX.options.onKeyEvent&&dX.options.onKeyEvent(dX,k(d1))){return}var d0=d1.keyCode,dY=d1.charCode;if(u&&d0==dp){dp=null;X(d1);return}if(((u&&(!d1.which||d1.which<10))||ac)&&du(dX,d1)){return}var dZ=String.fromCharCode(dY==null?d0:dY);if(this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!C(this)&&this.doc.mode.electricChars.indexOf(dZ)>-1){setTimeout(j(dX,function(){bD(dX,dX.doc.sel.to.line,"smart")}),75)}if(ck(dX,d1,dZ)){return}ag(dX)}function dN(dX){if(dX.options.readOnly=="nocursor"){return}if(!dX.state.focused){af(dX,"focus",dX);dX.state.focused=true;if(dX.display.wrapper.className.search(/\bCodeMirror-focused\b/)==-1){dX.display.wrapper.className+=" CodeMirror-focused"}dg(dX,true)}d(dX);dz(dX)}function O(dX){if(dX.state.focused){af(dX,"blur",dX);dX.state.focused=false;dX.display.wrapper.className=dX.display.wrapper.className.replace(" CodeMirror-focused","")}clearInterval(dX.display.blinker);setTimeout(function(){if(!dX.state.focused){dX.doc.sel.shift=false}},150)}var bn;function aM(d5,d0){var d2=d5.display,dY=d5.doc.sel;if(Z(d2,d0)){return}var d4=aQ(d5,d0),dX=d2.scroller.scrollTop;if(!d4||u){return}if(o(dY.from,dY.to)||D(d4,dY.from)||!D(d4,dY.to)){j(d5,bA)(d5.doc,d4,d4)}var d1=d2.input.style.cssText;d2.inputDiv.style.position="absolute";d2.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(d0.clientY-5)+"px; left: "+(d0.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);";bE(d5);dg(d5,true);if(o(dY.from,dY.to)){d2.input.value=d2.prevInput=" "}function d3(){d2.inputDiv.style.position="relative";d2.input.style.cssText=d1;if(ca){d2.scrollbarV.scrollTop=d2.scroller.scrollTop=dX}d(d5);if(d2.input.selectionStart!=null&&(!ao||ca)){clearTimeout(bn);var d7=d2.input.value=" "+(o(dY.from,dY.to)?"":d2.input.value),d6=0;d2.prevInput=" ";d2.input.selectionStart=1;d2.input.selectionEnd=d7.length;var d8=function(){if(d2.prevInput==" "&&d2.input.selectionStart==0){j(d5,ay.selectAll)(d5)}else{if(d6++<10){bn=setTimeout(d8,500)}else{dg(d5)}}};bn=setTimeout(d8,200)}}if(cU){c3(d0);var dZ=function(){dK(window,"mouseup",dZ);setTimeout(d3,20)};cC(window,"mouseup",dZ)}else{setTimeout(d3,50)}}function aw(dX){return dP(dX.from.line+dX.text.length-1,a8(dX.text).length+(dX.text.length==1?dX.from.ch:0))}function az(d1,d3,d2){if(!D(d3.from,d2)){return ap(d1,d2)}var d0=(d3.text.length-1)-(d3.to.line-d3.from.line);if(d2.line>d3.to.line+d0){var dZ=d2.line-d0,dY=d1.first+d1.size-1;if(dZ>dY){return dP(dY,dm(d1,dY).text.length)}return be(d2,dm(d1,dZ).text.length)}if(d2.line==d3.to.line+d0){return be(d2,a8(d3.text).length+(d3.text.length==1?d3.from.ch:0)+dm(d1,d3.to.line).text.length-d3.to.ch)}var dX=d2.line-d3.from.line;return be(d2,d3.text[dX].length+(dX?0:d3.from.ch))}function dd(dY,d1,dZ){if(dZ&&typeof dZ=="object"){return{anchor:az(dY,d1,dZ.anchor),head:az(dY,d1,dZ.head)}}if(dZ=="start"){return{anchor:d1.from,head:d1.from}}var dX=aw(d1);if(dZ=="around"){return{anchor:d1.from,head:dX}}if(dZ=="end"){return{anchor:dX,head:dX}}var d0=function(d4){if(D(d4,d1.from)){return d4}if(!D(d1.to,d4)){return dX}var d2=d4.line+d1.text.length-(d1.to.line-d1.from.line)-1,d3=d4.ch;if(d4.line==d1.to.line){d3+=dX.ch-d1.to.ch}return dP(d2,d3)};return{anchor:d0(dY.sel.anchor),head:d0(dY.sel.head)}}function aP(dY,dZ){var dX={canceled:false,from:dZ.from,to:dZ.to,text:dZ.text,origin:dZ.origin,update:function(d3,d2,d1,d0){if(d3){this.from=ap(dY,d3)}if(d2){this.to=ap(dY,d2)}if(d1){this.text=d1}if(d0!==undefined){this.origin=d0}},cancel:function(){this.canceled=true}};af(dY,"beforeChange",dY,dX);if(dY.cm){af(dY.cm,"beforeChange",dY.cm,dX)}if(dX.canceled){return null}return{from:dX.from,to:dX.to,text:dX.text,origin:dX.origin}}function cE(d0,d2,d1,dZ){if(d0.cm){if(!d0.cm.curOp){return j(d0.cm,cE)(d0,d2,d1,dZ)}if(d0.cm.state.suppressEdits){return}}if(w(d0,"beforeChange")||d0.cm&&w(d0.cm,"beforeChange")){d2=aP(d0,d2);if(!d2){return}}var dY=aL&&!dZ&&cF(d0,d2.from,d2.to);if(dY){for(var dX=dY.length-1;dX>=1;--dX){dJ(d0,{from:dY[dX].from,to:dY[dX].to,text:[""]})}if(dY.length){dJ(d0,{from:dY[0].from,to:dY[0].to,text:d2.text},d1)}}else{dJ(d0,d2,d1)}}function dJ(dZ,d1,d0){var dY=dd(dZ,d1,d0);g(dZ,d1,dY,dZ.cm?dZ.cm.curOp.id:NaN);dO(dZ,d1,dY,aR(dZ,d1));var dX=[];aX(dZ,function(d3,d2){if(!d2&&dE(dX,d3.history)==-1){ah(d3.history,d1);dX.push(d3.history)}dO(d3,d1,null,aR(d3,d1))})}function dx(d5,d2){var d1=d5.history;var dY=(d2=="undo"?d1.done:d1.undone).pop();if(!dY){return}d1.dirtyCounter+=d2=="undo"?-1:1;var d3={changes:[],anchorBefore:dY.anchorAfter,headBefore:dY.headAfter,anchorAfter:dY.anchorBefore,headAfter:dY.headBefore};(d2=="undo"?d1.undone:d1.done).push(d3);for(var dZ=dY.changes.length-1;dZ>=0;--dZ){var d4=dY.changes[dZ];d4.origin=d2;d3.changes.push(at(d5,d4));var dX=dZ?dd(d5,d4,null):{anchor:dY.anchorBefore,head:dY.headBefore};dO(d5,d4,dX,bQ(d5,d4));var d0=[];aX(d5,function(d7,d6){if(!d6&&dE(d0,d7.history)==-1){ah(d7.history,d4);d0.push(d7.history)}dO(d7,d4,null,bQ(d7,d4))})}}function dc(dX,dZ){function dY(d0){return dP(d0.line+dZ,d0.ch)}dX.first+=dZ;if(dX.cm){bR(dX.cm,dX.first,dX.first,dZ)}dX.sel.head=dY(dX.sel.head);dX.sel.anchor=dY(dX.sel.anchor);dX.sel.from=dY(dX.sel.from);dX.sel.to=dY(dX.sel.to)}function dO(d1,d2,d0,dY){if(d1.cm&&!d1.cm.curOp){return j(d1.cm,dO)(d1,d2,d0,dY)}if(d2.to.line<d1.first){dc(d1,d2.text.length-1-(d2.to.line-d2.from.line));return}if(d2.from.line>d1.lastLine()){return}if(d2.from.line<d1.first){var dX=d2.text.length-1-(d1.first-d2.from.line);dc(d1,dX);d2={from:dP(d1.first,0),to:dP(d2.to.line+dX,d2.to.ch),text:[a8(d2.text)],origin:d2.origin}}var dZ=d1.lastLine();if(d2.to.line>dZ){d2={from:d2.from,to:dP(dZ,dm(d1,dZ).text.length),text:[d2.text[0]],origin:d2.origin}}if(!d0){d0=dd(d1,d2,null)}if(d1.cm){r(d1.cm,d2,dY,d0)}else{c9(d1,d2,dY,d0)}}function r(d7,d3,d0,dX){var d6=d7.doc,d2=d7.display,d4=d3.from,d5=d3.to;var dY=false,dZ=d4.line;if(!d7.options.lineWrapping){dZ=l(aH(d6,dm(d6,d4.line)));d6.iter(dZ,d5.line+1,function(ea){if(ea==d2.maxLine){dY=true;return true}})}c9(d6,d3,d0,dX,aU(d7));if(!d7.options.lineWrapping){d6.iter(dZ,d4.line+d3.text.length,function(eb){var ea=b6(d6,eb);if(ea>d2.maxLineLength){d2.maxLine=eb;d2.maxLineLength=ea;d2.maxLineChanged=true;dY=false}});if(dY){d7.curOp.updateMaxLine=true}}d6.frontier=Math.min(d6.frontier,d4.line);bK(d7,400);var d9=d3.text.length-(d5.line-d4.line)-1;bR(d7,d4.line,d5.line+1,d9);if(w(d7,"change")){var d1={from:d4,to:d5,text:d3.text,origin:d3.origin};if(d7.curOp.textChanged){for(var d8=d7.curOp.textChanged;d8.next;d8=d8.next){}d8.next=d1}else{d7.curOp.textChanged=d1}}}function b2(d0,dZ,d2,d1,dX){if(!d1){d1=d2}if(D(d1,d2)){var dY=d1;d1=d2;d2=dY}if(typeof dZ=="string"){dZ=cY(dZ)}cE(d0,{from:d2,to:d1,text:dZ,origin:dX},null)}function dP(dX,dY){if(!(this instanceof dP)){return new dP(dX,dY)}this.line=dX;this.ch=dY}aq.Pos=dP;function o(dY,dX){return dY.line==dX.line&&dY.ch==dX.ch}function D(dY,dX){return dY.line<dX.line||(dY.line==dX.line&&dY.ch<dX.ch)}function dU(dX){return dP(dX.line,dX.ch)}function cl(dX,dY){return Math.max(dX.first,Math.min(dY,dX.first+dX.size-1))}function ap(dY,dZ){if(dZ.line<dY.first){return dP(dY.first,0)}var dX=dY.first+dY.size-1;if(dZ.line>dX){return dP(dX,dm(dY,dX).text.length)}return be(dZ,dm(dY,dZ.line).text.length)}function be(dZ,dY){var dX=dZ.ch;if(dX==null||dX>dY){return dP(dZ.line,dY)}else{if(dX<0){return dP(dZ.line,0)}else{return dZ}}}function bo(dY,dX){return dX>=dY.first&&dX<dY.first+dY.size}function dD(d1,d2,dX,dY){if(d1.sel.shift||d1.sel.extend){var d0=d1.sel.anchor;if(dX){var dZ=D(d2,d0);if(dZ!=D(dX,d0)){d0=d2;d2=dX}else{if(dZ!=D(d2,dX)){d2=dX}}}bA(d1,d0,d2,dY)}else{bA(d1,d2,dX||d2,dY)}if(d1.cm){d1.cm.curOp.userSelChange=true}}function q(d0,dX,dY){var dZ={anchor:dX,head:dY};af(d0,"beforeSelectionChange",d0,dZ);if(d0.cm){af(d0.cm,"beforeSelectionChange",d0.cm,dZ)}dZ.anchor=ap(d0,dZ.anchor);dZ.head=ap(d0,dZ.head);return dZ}function bA(d4,d1,d2,dZ,dY){if(!dY&&w(d4,"beforeSelectionChange")||d4.cm&&w(d4.cm,"beforeSelectionChange")){var d0=q(d4,d1,d2);d2=d0.head;d1=d0.anchor}var d3=d4.sel;d3.goalColumn=null;if(dY||!o(d1,d3.anchor)){d1=aj(d4,d1,dZ,dY!="push")}if(dY||!o(d2,d3.head)){d2=aj(d4,d2,dZ,dY!="push")}if(o(d3.anchor,d1)&&o(d3.head,d2)){return}d3.anchor=d1;d3.head=d2;var dX=D(d2,d1);d3.from=dX?d2:d1;d3.to=dX?d1:d2;if(d4.cm){d4.cm.curOp.updateInput=d4.cm.curOp.selectionChanged=true}ce(d4,"cursorActivity",d4)}function v(dX){bA(dX.doc,dX.doc.sel.from,dX.doc.sel.to,null,"push")}function aj(d7,d6,d3,d4){var d8=false,d0=d6;var d1=d3||1;d7.cantEdit=false;search:for(;;){var d9=dm(d7,d0.line),dZ;if(d9.markedSpans){for(var d2=0;d2<d9.markedSpans.length;++d2){var dX=d9.markedSpans[d2],dY=dX.marker;if((dX.from==null||(dY.inclusiveLeft?dX.from<=d0.ch:dX.from<d0.ch))&&(dX.to==null||(dY.inclusiveRight?dX.to>=d0.ch:dX.to>d0.ch))){if(d4&&dY.clearOnEnter){(dZ||(dZ=[])).push(dY);continue}else{if(!dY.atomic){continue}}var d5=dY.find()[d1<0?"from":"to"];if(o(d5,d0)){d5.ch+=d1;if(d5.ch<0){if(d5.line>d7.first){d5=ap(d7,dP(d5.line-1))}else{d5=null}}else{if(d5.ch>d9.text.length){if(d5.line<d7.first+d7.size-1){d5=dP(d5.line+1,0)}else{d5=null}}}if(!d5){if(d8){if(!d4){return aj(d7,d6,d3,true)}d7.cantEdit=true;return dP(d7.first,0)}d8=true;d5=d6;d1=-d1}}d0=d5;continue search}}if(dZ){for(var d2=0;d2<dZ.length;++d2){dZ[d2].clear()}}}return d0}}function cO(dY){var d1=cD(dY,dY.doc.sel.head);if(!dY.state.focused){return}var d2=dY.display,dZ=t(d2.sizer),dX=null;if(d1.top+dZ.top<0){dX=true}else{if(d1.bottom+dZ.top>(window.innerHeight||document.documentElement.clientHeight)){dX=false}}if(dX!=null&&!bl){var d0=d2.cursor.style.display=="none";if(d0){d2.cursor.style.display="";d2.cursor.style.left=d1.left+"px";d2.cursor.style.top=(d1.top-d2.viewOffset)+"px"}d2.cursor.scrollIntoView(dX);if(d0){d2.cursor.style.display="none"}}}function cD(dX,d3){for(;;){var d1=false,d0=bU(dX,d3);var d2=aB(dX,d0.left,d0.top,d0.left,d0.bottom);var dY=dX.doc.scrollTop,dZ=dX.doc.scrollLeft;if(d2.scrollTop!=null){cP(dX,d2.scrollTop);if(Math.abs(dX.doc.scrollTop-dY)>1){d1=true}}if(d2.scrollLeft!=null){W(dX,d2.scrollLeft);if(Math.abs(dX.doc.scrollLeft-dZ)>1){d1=true}}if(!d1){return d0}}}function G(dX,dZ,d1,dY,d0){var d2=aB(dX,dZ,d1,dY,d0);if(d2.scrollTop!=null){cP(dX,d2.scrollTop)}if(d2.scrollLeft!=null){W(dX,d2.scrollLeft)}}function aB(d8,d0,d7,dY,d6){var d5=d8.display,ed=c6(d5);d7+=ed;d6+=ed;var ea=d5.scroller.clientHeight-c7,d1=d5.scroller.scrollTop,ec={};var dZ=d8.doc.height+2*ed;var dX=d7<ed+10,d4=d6+ed>dZ-10;if(d7<d1){ec.scrollTop=dX?0:Math.max(0,d7)}else{if(d6>d1+ea){ec.scrollTop=(d4?dZ:d6)-ea}}var d9=d5.scroller.clientWidth-c7,eb=d5.scroller.scrollLeft;d0+=d5.gutters.offsetWidth;dY+=d5.gutters.offsetWidth;var d3=d5.gutters.offsetWidth;var d2=d0<d3+10;if(d0<eb+d3||d2){if(d2){d0=0}ec.scrollLeft=Math.max(0,d0-10-d3)}else{if(dY>d9+eb-3){ec.scrollLeft=dY+10-d9}}return ec}function bD(d9,d0,d8,dZ){var d7=d9.doc;if(!d8){d8="add"}if(d8=="smart"){if(!d9.doc.mode.indent){d8="prev"}else{var dY=c8(d9,d0)}}var d3=d9.options.tabSize;var ea=dm(d7,d0),d2=dQ(ea.text,null,d3);var dX=ea.text.match(/^\s*/)[0],d5;if(d8=="smart"){d5=d9.doc.mode.indent(dY,ea.text.slice(dX.length),ea.text);if(d5==aS){if(!dZ){return}d8="prev"}}if(d8=="prev"){if(d0>d7.first){d5=dQ(dm(d7,d0-1).text,null,d3)}else{d5=0}}else{if(d8=="add"){d5=d2+d9.options.indentUnit}else{if(d8=="subtract"){d5=d2-d9.options.indentUnit}}}d5=Math.max(0,d5);var d6="",d4=0;if(d9.options.indentWithTabs){for(var d1=Math.floor(d5/d3);d1;--d1){d4+=d3;d6+="\t"}}if(d4<d5){d6+=L(d5-d4)}if(d6!=dX){b2(d9.doc,d6,dP(d0,0),dP(d0,dX.length),"+input")}ea.stateAfter=null}function aA(dX,dZ,d2){var d1=dZ,dY=dZ,d0=dX.doc;if(typeof dZ=="number"){dY=dm(d0,cl(d0,dZ))}else{d1=l(dZ)}if(d1==null){return null}if(d2(dY,d1)){bR(dX,d1,d1+1)}else{return null}return dY}function c1(d6,d5,d1,d7,d0){var d9=d5.line,dX=d5.ch;var d4=dm(d6,d9);var d2=true;function dY(){var ea=d9+d1;if(ea<d6.first||ea>=d6.first+d6.size){return(d2=false)}d9=ea;return d4=dm(d6,ea)}function d3(eb){var ea=(d0?bZ:aV)(d4,dX,d1,true);if(ea==null){if(!eb&&dY()){if(d0){dX=(d1<0?cM:br)(d4)}else{dX=d1<0?d4.text.length:0}}else{return(d2=false)}}else{dX=ea}return true}if(d7=="char"){d3()}else{if(d7=="column"){d3(true)}else{if(d7=="word"){var dZ=false;for(;;){if(d1<0){if(!d3()){break}}if(V(d4.text.charAt(dX))){dZ=true}else{if(dZ){if(d1<0){d1=1;d3()}break}}if(d1>0){if(!d3()){break}}}}}}var d8=aj(d6,dP(d9,dX),d1,true);if(!d2){d8.hitSide=true}return d8}function cQ(d5,d0,dX,d4){var d3=d5.doc,d2=d0.left,d1;if(d4=="page"){var dZ=Math.min(d5.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);d1=d0.top+dX*dZ}else{if(d4=="line"){d1=dX>0?d0.bottom+3:d0.top-3}}for(;;){var dY=bL(d5,d2,d1);if(!dY.outside){break}if(dX<0?d1<=0:d1>=d3.height){dY.hitSide=true;break}d1+=dX*5}return dY}function bs(d0,d2){var d1=d2.ch,dZ=d2.ch;if(d0){if(d2.after===false||dZ==d0.length){--d1}else{++dZ}var dY=d0.charAt(d1);var dX=V(dY)?V:/\s/.test(dY)?function(d3){return/\s/.test(d3)}:function(d3){return !/\s/.test(d3)&&!V(d3)};while(d1>0&&dX(d0.charAt(d1-1))){--d1}while(dZ<d0.length&&dX(d0.charAt(dZ))){++dZ}}return{from:dP(d2.line,d1),to:dP(d2.line,dZ)}}function S(dX,dY){dD(dX.doc,dP(dY,0),ap(dX.doc,dP(dY+1,0)))}aq.prototype={focus:function(){window.focus();bE(this);dN(this);ag(this)},setOption:function(dZ,d0){var dY=this.options,dX=dY[dZ];if(dY[dZ]==d0&&dZ!="mode"){return}dY[dZ]=d0;if(dG.hasOwnProperty(dZ)){j(this,dG[dZ])(this,d0,dX)}},getOption:function(dX){return this.options[dX]},getDoc:function(){return this.doc},addKeyMap:function(dX){this.state.keyMaps.push(dX)},removeKeyMap:function(dY){var dZ=this.state.keyMaps;for(var dX=0;dX<dZ.length;++dX){if((typeof dY=="string"?dZ[dX].name:dZ[dX])==dY){dZ.splice(dX,1);return true}}},addOverlay:j(null,function(dX,dY){var dZ=dX.token?dX:aq.getMode(this.options,dX);if(dZ.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:dZ,modeSpec:dX,opaque:dY&&dY.opaque});this.state.modeGen++;bR(this)}),removeOverlay:j(null,function(dX){var dZ=this.state.overlays;for(var dY=0;dY<dZ.length;++dY){if(dZ[dY].modeSpec==dX){dZ.splice(dY,1);this.state.modeGen++;bR(this);return}}}),indentLine:j(null,function(dZ,dX,dY){if(typeof dX!="string"){if(dX==null){dX=this.options.smartIndent?"smart":"prev"}else{dX=dX?"add":"subtract"}}if(bo(this.doc,dZ)){bD(this,dZ,dX,dY)}}),indentSelection:j(null,function(dY){var dZ=this.doc.sel;if(o(dZ.from,dZ.to)){return bD(this,dZ.from.line,dY)}var d0=dZ.to.line-(dZ.to.ch?0:1);for(var dX=dZ.from.line;dX<=d0;++dX){bD(this,dX,dY)}}),getTokenAt:function(d3){var d0=this.doc;d3=ap(d0,d3);var dZ=c8(this,d3.line),d2=this.doc.mode;var dX=dm(d0,d3.line);var d1=new c(dX.text,this.options.tabSize);while(d1.pos<d3.ch&&!d1.eol()){d1.start=d1.pos;var dY=d2.token(d1,dZ)}return{start:d1.start,end:d1.pos,string:d1.current(),className:dY||null,type:dY||null,state:dZ}},getStateAfter:function(dX){var dY=this.doc;dX=cl(dY,dX==null?dY.first+dY.size-1:dX);return c8(this,dX+1)},cursorCoords:function(d0,dY){var dZ,dX=this.doc.sel;if(d0==null){dZ=dX.head}else{if(typeof d0=="object"){dZ=ap(this.doc,d0)}else{dZ=d0?dX.from:dX.to}}return bU(this,dZ,dY||"page")},charCoords:function(dY,dX){return dr(this,ap(this.doc,dY),dX||"page")},coordsChar:function(dX){var d0=t(this.display.lineSpace);var dY=window.pageYOffset||(document.documentElement||document.body).scrollTop;var dZ=window.pageXOffset||(document.documentElement||document.body).scrollLeft;return bL(this,dX.left-d0.left-dZ,dX.top-d0.top-dY)},defaultTextHeight:function(){return b0(this.display)},setGutterMarker:j(null,function(dX,dY,dZ){return aA(this,dX,function(d0){var d1=d0.gutterMarkers||(d0.gutterMarkers={});d1[dY]=dZ;if(!dZ&&cG(d1)){d0.gutterMarkers=null}return true})}),clearGutter:j(null,function(dZ){var dX=this,d0=dX.doc,dY=d0.first;d0.iter(function(d1){if(d1.gutterMarkers&&d1.gutterMarkers[dZ]){d1.gutterMarkers[dZ]=null;bR(dX,dY,dY+1);if(cG(d1.gutterMarkers)){d1.gutterMarkers=null}}++dY})}),addLineClass:j(null,function(dZ,dY,dX){return aA(this,dZ,function(d0){var d1=dY=="text"?"textClass":dY=="background"?"bgClass":"wrapClass";if(!d0[d1]){d0[d1]=dX}else{if(new RegExp("\\b"+dX+"\\b").test(d0[d1])){return false}else{d0[d1]+=" "+dX}}return true})}),removeLineClass:j(null,function(dZ,dY,dX){return aA(this,dZ,function(d0){var d3=dY=="text"?"textClass":dY=="background"?"bgClass":"wrapClass";var d2=d0[d3];if(!d2){return false}else{if(dX==null){d0[d3]=null}else{var d1=d2.replace(new RegExp("^"+dX+"\\b\\s*|\\s*\\b"+dX+"\\b"),"");if(d1==d2){return false}d0[d3]=d1||null}}return true})}),addLineWidget:j(null,function(dZ,dY,dX){return y(this,dZ,dY,dX)}),removeLineWidget:function(dX){dX.clear()},lineInfo:function(dX){if(typeof dX=="number"){if(!bo(this.doc,dX)){return null}var dY=dX;dX=dm(this.doc,dX);if(!dX){return null}}else{var dY=l(dX);if(dY==null){return null}}return{line:dY,handle:dX,text:dX.text,gutterMarkers:dX.gutterMarkers,textClass:dX.textClass,bgClass:dX.bgClass,wrapClass:dX.wrapClass,widgets:dX.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(d2,dZ,d4,d0,d6){var d1=this.display;d2=bU(this,ap(this.doc,d2));var d3=d2.bottom,dY=d2.left;dZ.style.position="absolute";d1.sizer.appendChild(dZ);if(d0=="over"){d3=d2.top}else{if(d0=="above"||d0=="near"){var dX=Math.max(d1.wrapper.clientHeight,this.doc.height),d5=Math.max(d1.sizer.clientWidth,d1.lineSpace.clientWidth);if((d0=="above"||d2.bottom+dZ.offsetHeight>dX)&&d2.top>dZ.offsetHeight){d3=d2.top-dZ.offsetHeight}else{if(d2.bottom+dZ.offsetHeight<=dX){d3=d2.bottom}}if(dY+dZ.offsetWidth>d5){dY=d5-dZ.offsetWidth}}}dZ.style.top=(d3+c6(d1))+"px";dZ.style.left=dZ.style.right="";if(d6=="right"){dY=d1.sizer.clientWidth-dZ.offsetWidth;dZ.style.right="0px"}else{if(d6=="left"){dY=0}else{if(d6=="middle"){dY=(d1.sizer.clientWidth-dZ.offsetWidth)/2}}dZ.style.left=dY+"px"}if(d4){G(this,dY,d3,dY+dZ.offsetWidth,d3+dZ.offsetHeight)}},triggerOnKeyDown:j(null,cK),execCommand:function(dX){return ay[dX](this)},findPosH:function(d3,d0,d1,dY){var dX=1;if(d0<0){dX=-1;d0=-d0}for(var dZ=0,d2=ap(this.doc,d3);dZ<d0;++dZ){d2=c1(this.doc,d2,dX,d1,dY);if(d2.hitSide){break}}return d2},moveH:j(null,function(dX,dY){var dZ=this.doc.sel,d0;if(dZ.shift||dZ.extend||o(dZ.from,dZ.to)){d0=c1(this.doc,dZ.head,dX,dY,this.options.rtlMoveVisually)}else{d0=dX<0?dZ.from:dZ.to}dD(this.doc,d0,d0,dX)}),deleteH:j(null,function(dX,dY){var dZ=this.doc.sel;if(!o(dZ.from,dZ.to)){b2(this.doc,"",dZ.from,dZ.to,"+delete")}else{b2(this.doc,"",dZ.from,c1(this.doc,dZ.head,dX,dY,false),"+delete")}this.curOp.userSelChange=true}),findPosV:function(d2,dZ,d3,d5){var dX=1,d1=d5;if(dZ<0){dX=-1;dZ=-dZ}for(var dY=0,d4=ap(this.doc,d2);dY<dZ;++dY){var d0=bU(this,d4,"div");if(d1==null){d1=d0.left}else{d0.left=d1}d4=cQ(this,d0,dX,d3);if(d4.hitSide){break}}return d4},moveV:j(null,function(dX,dY){var dZ=this.doc.sel;var d1=bU(this,dZ.head,"div");if(dZ.goalColumn!=null){d1.left=dZ.goalColumn}var d0=cQ(this,d1,dX,dY);if(dY=="page"){this.display.scrollbarV.scrollTop+=dr(this,d0,"div").top-d1.top}dD(this.doc,d0,d0,dX);dZ.goalColumn=d1.left}),toggleOverwrite:function(){if(this.state.overwrite=!this.state.overwrite){this.display.cursor.className+=" CodeMirror-overwrite"}else{this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")}},scrollTo:j(null,function(dX,dY){this.curOp.updateScrollPos={scrollLeft:dX,scrollTop:dY}}),getScrollInfo:function(){var dX=this.display.scroller,dY=c7;return{left:dX.scrollLeft,top:dX.scrollTop,height:dX.scrollHeight-dY,width:dX.scrollWidth-dY,clientHeight:dX.clientHeight-dY,clientWidth:dX.clientWidth-dY}},scrollIntoView:function(dX){if(typeof dX=="number"){dX=dP(dX,0)}if(!dX||dX.line!=null){dX=dX?ap(this.doc,dX):this.doc.sel.head;cD(this,dX)}else{G(this,dX.left,dX.top,dX.right,dX.bottom)}},setSize:function(dZ,dX){function dY(d0){return typeof d0=="number"||/^\d+$/.test(String(d0))?d0+"px":d0}if(dZ!=null){this.display.wrapper.style.width=dY(dZ)}if(dX!=null){this.display.wrapper.style.height=dY(dX)}this.refresh()},on:function(dX,dY){cC(this,dX,dY)},off:function(dX,dY){dK(this,dX,dY)},operation:function(dX){return cv(this,dX)},refresh:j(null,function(){c0(this);this.curOp.updateScrollPos={scrollTop:this.doc.scrollTop,scrollLeft:this.doc.scrollLeft};bR(this)}),swapDoc:j(null,function(dY){var dX=this.doc;dX.cm=null;cm(this,dY);c0(this);this.curOp.updateScrollPos={scrollTop:dY.scrollTop,scrollLeft:dY.scrollLeft};return dX}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var dG=aq.optionHandlers={};var a9=aq.defaults={};function bf(dX,d0,dZ,dY){aq.defaults[dX]=d0;if(dZ){dG[dX]=dY?function(d1,d3,d2){if(d2!=h){dZ(d1,d3,d2)}}:dZ}}var h=aq.Init={toString:function(){return"CodeMirror.Init"}};bf("value","",function(dX,dY){dX.setValue(dY)},true);bf("mode",null,function(dX,dY){dX.doc.modeOption=dY;b8(dX)},true);bf("indentUnit",2,b8,true);bf("indentWithTabs",false);bf("smartIndent",true);bf("tabSize",4,function(dX){b8(dX);c0(dX);bR(dX)},true);bf("electricChars",true);bf("rtlMoveVisually",!bY);bf("theme","default",function(dX){dh(dX);b3(dX)},true);bf("keyMap","default",da);bf("extraKeys",null);bf("onKeyEvent",null);bf("onDragEvent",null);bf("lineWrapping",false,dn,true);bf("gutters",[],function(dX){a3(dX.options);b3(dX)},true);bf("fixedGutter",true,function(dX,dY){dX.display.gutters.style.left=dY?dS(dX.display)+"px":"0";dX.refresh()},true);bf("lineNumbers",false,function(dX){a3(dX.options);b3(dX)},true);bf("firstLineNumber",1,b3,true);bf("lineNumberFormatter",function(dX){return dX},b3,true);bf("showCursorWhenSelecting",false,dR,true);bf("readOnly",false,function(dX,dY){if(dY=="nocursor"){O(dX);dX.display.input.blur()}else{if(!dY){dg(dX,true)}}});bf("dragDrop",true);bf("cursorBlinkRate",530);bf("cursorHeight",1);bf("workTime",100);bf("workDelay",100);bf("flattenSpans",true);bf("pollInterval",100);bf("undoDepth",40,function(dX,dY){dX.doc.history.undoDepth=dY});bf("viewportMargin",10,function(dX){dX.refresh()},true);bf("tabindex",null,function(dX,dY){dX.display.input.tabIndex=dY||""});bf("autofocus",null);var dA=aq.modes={},cj=aq.mimeModes={};aq.defineMode=function(dX,dZ){if(!aq.defaults.mode&&dX!="null"){aq.defaults.mode=dX}if(arguments.length>2){dZ.dependencies=[];for(var dY=2;dY<arguments.length;++dY){dZ.dependencies.push(arguments[dY])}}dA[dX]=dZ};aq.defineMIME=function(dY,dX){cj[dY]=dX};aq.resolveMode=function(dX){if(typeof dX=="string"&&cj.hasOwnProperty(dX)){dX=cj[dX]}else{if(typeof dX=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(dX)){return aq.resolveMode("application/xml")}}if(typeof dX=="string"){return{name:dX}}else{return dX||{name:"null"}}};aq.getMode=function(dY,dX){dX=aq.resolveMode(dX);var d0=dA[dX.name];if(!d0){return aq.getMode(dY,"text/plain")}var d1=d0(dY,dX);if(cs.hasOwnProperty(dX.name)){var dZ=cs[dX.name];for(var d2 in dZ){if(!dZ.hasOwnProperty(d2)){continue}if(d1.hasOwnProperty(d2)){d1["_"+d2]=d1[d2]}d1[d2]=dZ[d2]}}d1.name=dX.name;return d1};aq.defineMode("null",function(){return{token:function(dX){dX.skipToEnd()}}});aq.defineMIME("text/plain","null");var cs=aq.modeExtensions={};aq.extendMode=function(dZ,dY){var dX=cs.hasOwnProperty(dZ)?cs[dZ]:(cs[dZ]={});bS(dY,dX)};aq.defineExtension=function(dX,dY){aq.prototype[dX]=dY};aq.defineOption=bf;var J=[];aq.defineInitHook=function(dX){J.push(dX)};function f(d0,dX){if(dX===true){return dX}if(d0.copyState){return d0.copyState(dX)}var dZ={};for(var d1 in dX){var dY=dX[d1];if(dY instanceof Array){dY=dY.concat([])}dZ[d1]=dY}return dZ}aq.copyState=f;function a1(dZ,dY,dX){return dZ.startState?dZ.startState(dY,dX):true}aq.startState=a1;aq.innerMode=function(dZ,dX){while(dZ.innerMode){var dY=dZ.innerMode(dX);dX=dY.state;dZ=dY.mode}return dY||{mode:dZ,state:dX}};var ay=aq.commands={selectAll:function(dX){dX.setSelection(dP(dX.firstLine(),0),dP(dX.lastLine()))},killLine:function(dX){var d0=dX.getCursor(true),dZ=dX.getCursor(false),dY=!o(d0,dZ);if(!dY&&dX.getLine(d0.line).length==d0.ch){dX.replaceRange("",d0,dP(d0.line+1,0),"+delete")}else{dX.replaceRange("",d0,dY?dZ:dP(d0.line),"+delete")}},deleteLine:function(dX){var dY=dX.getCursor().line;dX.replaceRange("",dP(dY,0),dP(dY),"+delete")},undo:function(dX){dX.undo()},redo:function(dX){dX.redo()},goDocStart:function(dX){dX.extendSelection(dP(dX.firstLine(),0))},goDocEnd:function(dX){dX.extendSelection(dP(dX.lastLine()))},goLineStart:function(dX){dX.extendSelection(z(dX,dX.getCursor().line))},goLineStartSmart:function(dY){var d2=dY.getCursor(),d3=z(dY,d2.line);var dZ=dY.getLineHandle(d3.line);var dX=cq(dZ);if(!dX||dX[0].level==0){var d1=Math.max(0,dZ.text.search(/\S/));var d0=d2.line==d3.line&&d2.ch<=d1&&d2.ch;dY.extendSelection(dP(d3.line,d0?0:d1))}else{dY.extendSelection(d3)}},goLineEnd:function(dX){dX.extendSelection(T(dX,dX.getCursor().line))},goLineUp:function(dX){dX.moveV(-1,"line")},goLineDown:function(dX){dX.moveV(1,"line")},goPageUp:function(dX){dX.moveV(-1,"page")},goPageDown:function(dX){dX.moveV(1,"page")},goCharLeft:function(dX){dX.moveH(-1,"char")},goCharRight:function(dX){dX.moveH(1,"char")},goColumnLeft:function(dX){dX.moveH(-1,"column")},goColumnRight:function(dX){dX.moveH(1,"column")},goWordLeft:function(dX){dX.moveH(-1,"word")},goWordRight:function(dX){dX.moveH(1,"word")},delCharBefore:function(dX){dX.deleteH(-1,"char")},delCharAfter:function(dX){dX.deleteH(1,"char")},delWordBefore:function(dX){dX.deleteH(-1,"word")},delWordAfter:function(dX){dX.deleteH(1,"word")},indentAuto:function(dX){dX.indentSelection("smart")},indentMore:function(dX){dX.indentSelection("add")},indentLess:function(dX){dX.indentSelection("subtract")},insertTab:function(dX){dX.replaceSelection("\t","end","+input")},defaultTab:function(dX){if(dX.somethingSelected()){dX.indentSelection("add")}else{dX.replaceSelection("\t","end","+input")}},transposeChars:function(dX){var dZ=dX.getCursor(),dY=dX.getLine(dZ.line);if(dZ.ch>0&&dZ.ch<dY.length-1){dX.replaceRange(dY.charAt(dZ.ch)+dY.charAt(dZ.ch-1),dP(dZ.line,dZ.ch-1),dP(dZ.line,dZ.ch+1))}},newlineAndIndent:function(dX){j(dX,function(){dX.replaceSelection("\n","end","+input");dX.indentLine(dX.getCursor().line,null,true)})()},toggleOverwrite:function(dX){dX.toggleOverwrite()}};var dM=aq.keyMap={};dM.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};dM.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore","Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};dM.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore","Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};dM["default"]=a5?dM.macDefault:dM.pcDefault;dM.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};function m(dX){if(typeof dX=="string"){return dM[dX]}else{return dX}}function au(dY,d2,d0){function d1(d8){d8=m(d8);var d6=d8[dY];if(d6===false){return"stop"}if(d6!=null&&d0(d6)){return true}if(d8.nofallthrough){return"stop"}var d5=d8.fallthrough;if(d5==null){return false}if(Object.prototype.toString.call(d5)!="[object Array]"){return d1(d5)}for(var d4=0,d7=d5.length;d4<d7;++d4){var d3=d1(d5[d4]);if(d3){return d3}}return false}for(var dZ=0;dZ<d2.length;++dZ){var dX=d1(d2[dZ]);if(dX){return dX}}}function n(dY){var dX=E[dY.keyCode];return dX=="Ctrl"||dX=="Alt"||dX=="Shift"||dX=="Mod"}function dC(dY,dZ){var dX=E[dY.keyCode];if(dX==null||dY.altGraphKey){return false}if(dY.altKey){dX="Alt-"+dX}if(dH?dY.metaKey:dY.ctrlKey){dX="Ctrl-"+dX}if(dH?dY.ctrlKey:dY.metaKey){dX="Cmd-"+dX}if(!dZ&&dY.shiftKey){dX="Shift-"+dX}return dX}aq.lookupKey=au;aq.isModifierKey=n;aq.keyName=dC;aq.fromTextArea=function(d4,d5){if(!d5){d5={}}d5.value=d4.value;if(!d5.tabindex&&d4.tabindex){d5.tabindex=d4.tabindex}if(d5.autofocus==null){var dX=document.body;try{dX=document.activeElement}catch(dZ){}d5.autofocus=dX==d4||d4.getAttribute("autofocus")!=null&&dX==document.body}function d1(){d4.value=d3.getValue()}if(d4.form){cC(d4.form,"submit",d1);var dY=d4.form,d2=dY.submit;try{var d0=dY.submit=function(){d1();dY.submit=d2;dY.submit();dY.submit=d0}}catch(dZ){}}d4.style.display="none";var d3=aq(function(d6){d4.parentNode.insertBefore(d6,d4.nextSibling)},d5);d3.save=d1;d3.getTextArea=function(){return d4};d3.toTextArea=function(){d1();d4.parentNode.removeChild(d3.getWrapperElement());d4.style.display="";if(d4.form){dK(d4.form,"submit",d1);if(typeof d4.form.submit=="function"){d4.form.submit=d2}}};return d3};function c(dX,dY){this.pos=this.start=0;this.string=dX;this.tabSize=dY||8}c.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(dX){var dZ=this.string.charAt(this.pos);if(typeof dX=="string"){var dY=dZ==dX}else{var dY=dZ&&(dX.test?dX.test(dZ):dX(dZ))}if(dY){++this.pos;return dZ}},eatWhile:function(dX){var dY=this.pos;while(this.eat(dX)){}return this.pos>dY},eatSpace:function(){var dX=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>dX},skipToEnd:function(){this.pos=this.string.length},skipTo:function(dX){var dY=this.string.indexOf(dX,this.pos);if(dY>-1){this.pos=dY;return true}},backUp:function(dX){this.pos-=dX},column:function(){return dQ(this.string,this.start,this.tabSize)},indentation:function(){return dQ(this.string,null,this.tabSize)},match:function(d0,dY,dX){if(typeof d0=="string"){var d1=function(d2){return dX?d2.toLowerCase():d2};if(d1(this.string).indexOf(d1(d0),this.pos)==this.pos){if(dY!==false){this.pos+=d0.length}return true}}else{var dZ=this.string.slice(this.pos).match(d0);if(dZ&&dZ.index>0){return null}if(dZ&&dY!==false){this.pos+=dZ[0].length}return dZ}},current:function(){return this.string.slice(this.start,this.pos)}};aq.StringStream=c;function dW(dY,dX){this.lines=[];this.type=dX;this.doc=dY}aq.TextMarker=dW;dW.prototype.clear=function(){if(this.explicitlyCleared){return}var d4=this.doc.cm,dY=d4&&!d4.curOp;if(dY){aa(d4)}var dZ=null,d2=null;for(var d0=0;d0<this.lines.length;++d0){var d5=this.lines[d0];var d3=c4(d5.markedSpans,this);if(d3.to!=null){d2=l(d5)}d5.markedSpans=dk(d5.markedSpans,d3);if(d3.from!=null){dZ=l(d5)}else{if(this.collapsed&&!bc(this.doc,d5)&&d4){aO(d5,b0(d4.display))}}}if(d4&&this.collapsed&&!d4.options.lineWrapping){for(var d0=0;d0<this.lines.length;++d0){var dX=aH(d4.doc,this.lines[d0]),d1=b6(d4.doc,dX);if(d1>d4.display.maxLineLength){d4.display.maxLine=dX;d4.display.maxLineLength=d1;d4.display.maxLineChanged=true}}}if(dZ!=null&&d4){bR(d4,dZ,d2+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.collapsed&&this.doc.cantEdit){this.doc.cantEdit=false;if(d4){v(d4)}}if(dY){B(d4)}ce(this,"clear")};dW.prototype.find=function(){var d2,d1;for(var dY=0;dY<this.lines.length;++dY){var dX=this.lines[dY];var dZ=c4(dX.markedSpans,this);if(dZ.from!=null||dZ.to!=null){var d0=l(dX);if(dZ.from!=null){d2=dP(d0,dZ.from)}if(dZ.to!=null){d1=dP(d0,dZ.to)}}}if(this.type=="bookmark"){return d2}return d2&&{from:d2,to:d1}};dW.prototype.getOptions=function(dX){var dY=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,clearOnEnter:this.clearOnEnter,replacedWith:dX?dY&&dY.cloneNode(true):dY,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}};dW.prototype.attachLine=function(dX){if(!this.lines.length&&this.doc.cm){var dY=this.doc.cm.curOp;if(!dY.maybeHiddenMarkers||dE(dY.maybeHiddenMarkers,this)==-1){(dY.maybeUnhiddenMarkers||(dY.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(dX)};dW.prototype.detachLine=function(dX){this.lines.splice(dE(this.lines,dX),1);if(!this.lines.length&&this.doc.cm){var dY=this.doc.cm.curOp;(dY.maybeHiddenMarkers||(dY.maybeHiddenMarkers=[])).push(this)}};function bJ(d6,d4,d5,d8,d2){if(d8&&d8.shared){return an(d6,d4,d5,d8,d2)}if(d6.cm&&!d6.cm.curOp){return j(d6.cm,bJ)(d6,d4,d5,d8,d2)}var d1=new dW(d6,d2);if(d2=="range"&&!D(d4,d5)){return d1}if(d8){bS(d8,d1)}if(d1.replacedWith){d1.collapsed=true;d1.replacedWith=bH("span",[d1.replacedWith],"CodeMirror-widget")}if(d1.collapsed){dt=true}var dY=d4.line,d7=0,d0,dZ,d3=d6.cm,dX;d6.iter(dY,d5.line+1,function(d9){if(d3&&d1.collapsed&&!d3.options.lineWrapping&&aH(d6,d9)==d3.display.maxLine){dX=true}var ea={from:null,to:null,marker:d1};d7+=d9.text.length;if(dY==d4.line){ea.from=d4.ch;d7-=d4.ch}if(dY==d5.line){ea.to=d5.ch;d7-=d9.text.length-d5.ch}if(d1.collapsed){if(dY==d5.line){dZ=ar(d9,d5.ch)}if(dY==d4.line){d0=ar(d9,d4.ch)}else{aO(d9,0)}}cz(d9,ea);++dY});if(d1.collapsed){d6.iter(d4.line,d5.line+1,function(d9){if(bc(d6,d9)){aO(d9,0)}})}if(d1.readOnly){aL=true;if(d6.history.done.length||d6.history.undone.length){d6.clearHistory()}}if(d1.collapsed){if(d0!=dZ){throw new Error("Inserting collapsed marker overlapping an existing one")}d1.size=d7;d1.atomic=true}if(d3){if(dX){d3.curOp.updateMaxLine=true}if(d1.className||d1.startStyle||d1.endStyle||d1.collapsed){bR(d3,d4.line,d5.line+1)}if(d1.atomic){v(d3)}}return d1}function cH(d0,dY){this.markers=d0;this.primary=dY;for(var dX=0,dZ=this;dX<d0.length;++dX){d0[dX].parent=this;cC(d0[dX],"clear",function(){dZ.clear()})}}aq.SharedTextMarker=cH;cH.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var dX=0;dX<this.markers.length;++dX){this.markers[dX].clear()}ce(this,"clear")};cH.prototype.find=function(){return this.primary.find()};cH.prototype.getOptions=function(dY){var dX=this.primary.getOptions(dY);dX.shared=true;return dX};function an(d0,d3,d2,dX,dZ){dX=bS(dX);dX.shared=false;var d1=[bJ(d0,d3,d2,dX,dZ)],dY=d1[0];aX(d0,function(d5){d1.push(bJ(d5,ap(d5,d3),ap(d5,d2),dX,dZ));for(var d4=0;d4<d5.linked.length;++d4){if(d5.linked[d4].isParent){return}}dY=a8(d1)});return new cH(d1,dY)}function c4(dZ,dX){if(dZ){for(var dY=0;dY<dZ.length;++dY){var d0=dZ[dY];if(d0.marker==dX){return d0}}}}function dk(dY,dZ){for(var d0,dX=0;dX<dY.length;++dX){if(dY[dX]!=dZ){(d0||(d0=[])).push(dY[dX])}}return d0}function cz(dX,dY){dX.markedSpans=dX.markedSpans?dX.markedSpans.concat([dY]):[dY];dY.marker.attachLine(dX)}function p(dY,dZ,d3){if(dY){for(var d1=0,d4;d1<dY.length;++d1){var d5=dY[d1],d2=d5.marker;var dX=d5.from==null||(d2.inclusiveLeft?d5.from<=dZ:d5.from<dZ);if(dX||d2.type=="bookmark"&&d5.from==dZ&&(!d3||!d5.marker.insertLeft)){var d0=d5.to==null||(d2.inclusiveRight?d5.to>=dZ:d5.to>dZ);(d4||(d4=[])).push({from:d5.from,to:d0?null:d5.to,marker:d2})}}}return d4}function dB(dY,d0,d3){if(dY){for(var d1=0,d4;d1<dY.length;++d1){var d5=dY[d1],d2=d5.marker;var dZ=d5.to==null||(d2.inclusiveRight?d5.to>=d0:d5.to>d0);if(dZ||d2.type=="bookmark"&&d5.from==d0&&(!d3||d5.marker.insertLeft)){var dX=d5.from==null||(d2.inclusiveLeft?d5.from<=d0:d5.from<d0);(d4||(d4=[])).push({from:dX?null:d5.from-d0,to:d5.to==null?null:d5.to-d0,marker:d2})}}}return d4}function aR(d9,d6){var d5=bo(d9,d6.from.line)&&dm(d9,d6.from.line).markedSpans;var ec=bo(d9,d6.to.line)&&dm(d9,d6.to.line).markedSpans;if(!d5&&!ec){return null}var dY=d6.from.ch,d1=d6.to.ch,d4=o(d6.from,d6.to);var d3=p(d5,dY,d4);var eb=dB(ec,d1,d4);var ea=d6.text.length==1,dZ=a8(d6.text).length+(ea?dY:0);if(d3){for(var d0=0;d0<d3.length;++d0){var d8=d3[d0];if(d8.to==null){var ed=c4(eb,d8.marker);if(!ed){d8.to=dY}else{if(ea){d8.to=ed.to==null?null:ed.to+dZ}}}}}if(eb){for(var d0=0;d0<eb.length;++d0){var d8=eb[d0];if(d8.to!=null){d8.to+=dZ}if(d8.from==null){var ed=c4(d3,d8.marker);if(!ed){d8.from=dZ;if(ea){(d3||(d3=[])).push(d8)}}}else{d8.from+=dZ;if(ea){(d3||(d3=[])).push(d8)}}}}var d2=[d3];if(!ea){var d7=d6.text.length-2,dX;if(d7>0&&d3){for(var d0=0;d0<d3.length;++d0){if(d3[d0].to==null){(dX||(dX=[])).push({from:null,to:null,marker:d3[d0].marker})}}}for(var d0=0;d0<d7;++d0){d2.push(dX)}d2.push(eb)}return d2}function bQ(d5,d3){var dX=H(d5,d3);var d6=aR(d5,d3);if(!dX){return d6}if(!d6){return dX}for(var d0=0;d0<dX.length;++d0){var d1=dX[d0],d2=d6[d0];if(d1&&d2){spans:for(var dZ=0;dZ<d2.length;++dZ){var d4=d2[dZ];for(var dY=0;dY<d1.length;++dY){if(d1[dY].marker==d4.marker){continue spans}}d1.push(d4)}}else{if(d2){dX[d0]=d2}}}return dX}function cF(d7,d5,d6){var d0=null;d7.iter(d5.line,d6.line+1,function(d8){if(d8.markedSpans){for(var d9=0;d9<d8.markedSpans.length;++d9){var ea=d8.markedSpans[d9].marker;if(ea.readOnly&&(!d0||dE(d0,ea)==-1)){(d0||(d0=[])).push(ea)}}}});if(!d0){return null}var d1=[{from:d5,to:d6}];for(var d2=0;d2<d0.length;++d2){var d3=d0[d2],dY=d3.find();for(var dZ=0;dZ<d1.length;++dZ){var dX=d1[dZ];if(D(dX.to,dY.from)||D(dY.to,dX.from)){continue}var d4=[dZ,1];if(D(dX.from,dY.from)||!d3.inclusiveLeft&&o(dX.from,dY.from)){d4.push({from:dX.from,to:dY.from})}if(D(dY.to,dX.to)||!d3.inclusiveRight&&o(dX.to,dY.to)){d4.push({from:dY.to,to:dX.to})}d1.splice.apply(d1,d4);dZ+=d4.length-1}}return d1}function ar(dY,d0){var dX=dt&&dY.markedSpans,d2;if(dX){for(var d1,dZ=0;dZ<dX.length;++dZ){d1=dX[dZ];if(!d1.marker.collapsed){continue}if((d1.from==null||d1.from<d0)&&(d1.to==null||d1.to>d0)&&(!d2||d2.width<d1.marker.width)){d2=d1.marker}}}return d2}function ds(dX){return ar(dX,-1)}function I(dX){return ar(dX,dX.text.length+1)}function aH(dZ,dY){var dX;while(dX=ds(dY)){dY=dm(dZ,dX.find().from.line)}return dY}function bc(d1,dY){var dX=dt&&dY.markedSpans;if(dX){for(var d0,dZ=0;dZ<dX.length;++dZ){d0=dX[dZ];if(!d0.marker.collapsed){continue}if(d0.from==null){return true}if(d0.from==0&&d0.marker.inclusiveLeft&&b(d1,dY,d0)){return true}}}}function b(d3,dY,d0){if(d0.to==null){var dX=d0.marker.find().to,d1=dm(d3,dX.line);return b(d3,d1,c4(d1.markedSpans,d0.marker))}if(d0.marker.inclusiveRight&&d0.to==dY.text.length){return true}for(var d2,dZ=0;dZ<dY.markedSpans.length;++dZ){d2=dY.markedSpans[dZ];if(d2.marker.collapsed&&d2.from==d0.to&&(d2.marker.inclusiveLeft||d0.marker.inclusiveRight)&&b(d3,dY,d2)){return true}}}function R(dX){var dZ=dX.markedSpans;if(!dZ){return}for(var dY=0;dY<dZ.length;++dY){dZ[dY].marker.detachLine(dX)}dX.markedSpans=null}function db(dX,dZ){if(!dZ){return}for(var dY=0;dY<dZ.length;++dY){dZ[dY].marker.attachLine(dX)}dX.markedSpans=dZ}var Y=aq.LineWidget=function(dX,d0,dY){for(var dZ in dY){if(dY.hasOwnProperty(dZ)){this[dZ]=dY[dZ]}}this.cm=dX;this.node=d0};function bi(dX){return function(){var dZ=!this.cm.curOp;if(dZ){aa(this.cm)}try{var dY=dX.apply(this,arguments)}finally{if(dZ){B(this.cm)}}return dY}}Y.prototype.clear=bi(function(){var dX=this.line.widgets,dZ=l(this.line);if(dZ==null||!dX){return}for(var dY=0;dY<dX.length;++dY){if(dX[dY]==this){dX.splice(dY--,1)}}if(!dX.length){this.line.widgets=null}aO(this.line,Math.max(0,this.line.height-ax(this)));bR(this.cm,dZ,dZ+1)});Y.prototype.changed=bi(function(){var dX=this.height;this.height=null;var dY=ax(this)-dX;if(!dY){return}aO(this.line,this.line.height+dY);var dZ=l(this.line);bR(this.cm,dZ,dZ+1)});function ax(dX){if(dX.height!=null){return dX.height}if(!dX.node.parentNode||dX.node.parentNode.nodeType!=1){cZ(dX.cm.display.measure,bH("div",[dX.node],null,"position: relative"))}return dX.height=dX.node.offsetHeight}function y(dX,d1,dZ,dY){var d0=new Y(dX,dZ,dY);if(d0.noHScroll){dX.display.alignWidgets=true}aA(dX,d1,function(d3){(d3.widgets||(d3.widgets=[])).push(d0);d0.line=d3;if(!bc(dX.doc,d3)||d0.showIfHidden){var d2=cg(dX,d3)<dX.display.scroller.scrollTop;aO(d3,d3.height+ax(d0));if(d2){dX.curOp.updateScrollPos={scrollTop:dX.doc.scrollTop+d0.height,scrollLeft:dX.doc.scrollLeft}}}return true});return d0}function bu(d0,dZ,dX){var dY={text:d0};db(dY,dZ);dY.height=dX?dX(dY):1;return dY}function aC(dY,d1,dZ,dX){dY.text=d1;if(dY.stateAfter){dY.stateAfter=null}if(dY.styles){dY.styles=null}if(dY.order!=null){dY.order=null}R(dY);db(dY,dZ);var d0=dX?dX(dY):1;if(d0!=dY.height){aO(dY,d0)}ce(dY,"change")}function U(dX){dX.parent=null;R(dX)}function a4(d4,d6,d1,dY,d2){var dZ=d4.options.flattenSpans;var d7="",d3=null;var d5=new c(d6,d4.options.tabSize);if(d6==""&&d1.blankLine){d1.blankLine(dY)}while(!d5.eol()){var dX=d1.token(d5,dY);if(d5.pos>5000){dZ=false;d5.pos=Math.min(d6.length,d5.start+50000);dX=null}var d0=d5.current();d5.start=d5.pos;if(!dZ||d3!=dX){if(d7){d2(d7,d3)}d7=d0;d3=dX}else{d7=d7+d0}}if(d7){d2(d7,d3)}}function a(dX,dY,d2){var d0=[dX.state.modeGen];a4(dX,dY.text,dX.doc.mode,d2,function(d4,d5){d0.push(d4,d5)});for(var d3=0;d3<dX.state.overlays.length;++d3){var dZ=dX.state.overlays[d3],d1=1;a4(dX,dY.text,dZ.mode,true,function(d5,d7){var d9=d1,d4=d5.length;while(d4){var d8=d0[d1],d6=d8.length;if(d6<=d4){d4-=d6}else{d0.splice(d1,1,d8.slice(0,d4),d0[d1+1],d8.slice(d4));d4=0}d1+=2}if(!d7){return}if(dZ.opaque){d0.splice(d9,d1-d9,d5,d7);d1=d9+2}else{for(;d9<d1;d9+=2){var d8=d0[d9+1];d0[d9+1]=d8?d8+" "+d7:d7}}})}return d0}function bd(dX,dY){if(!dY.styles||dY.styles[0]!=dX.state.modeGen){dY.styles=a(dX,dY,dY.stateAfter=c8(dX,l(dY)))}return dY.styles}function ci(dX,dY,dZ){var d1=dX.doc.mode;var d0=new c(dY.text,dX.options.tabSize);if(dY.text==""&&d1.blankLine){d1.blankLine(dZ)}while(!d0.eol()&&d0.pos<=5000){d1.token(d0,dZ);d0.start=d0.pos}}var b7={};function a2(dX){if(!dX){return null}return b7[dX]||(b7[dX]="cm-"+dX.replace(/ +/g," cm-"))}function bW(d6,ea,dY){var d7,eb=ea,d4,d9,dX=true;while(d7=ds(eb)){dX=false;eb=dm(d6.doc,d7.find().from.line);if(!d4){d4=eb}}var d3={pre:bH("pre"),col:0,pos:0,display:!dY,measure:null,addedOne:false,cm:d6};if(eb.textClass){d3.pre.className=eb.textClass}do{d3.measure=eb==ea&&dY;d3.pos=0;d3.addToken=d3.measure?ak:ai;if(dY&&d9&&eb!=ea&&!d3.addedOne){dY[0]=d3.pre.appendChild(bj(d6.display.measure));d3.addedOne=true}var d2=bz(eb,d3,bd(d6,eb));d9=eb==d4;if(d2){eb=dm(d6.doc,d2.to.line);dX=false}}while(d2);if(dY&&!d3.addedOne){dY[0]=d3.pre.appendChild(dX?bH("span","\u00a0"):bj(d6.display.measure))}if(!d3.pre.firstChild&&!bc(d6.doc,ea)){d3.pre.appendChild(document.createTextNode("\u00a0"))}var dZ;if(dY&&ao&&(dZ=cq(eb))){var d1=dZ.length-1;if(dZ[d1].from==dZ[d1].to){--d1}var d8=dZ[d1],d0=dZ[d1-1];if(d8.from+1==d8.to&&d0&&d8.level<d0.level){var d5=dY[d3.pos-1];if(d5){d5.parentNode.insertBefore(d5.measureRight=bj(d6.display.measure),d5.nextSibling)}}}return d3.pre}var bV=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;function ai(d1,d8,dX,d0,d9){if(!d8){return}if(!bV.test(d8)){d1.col+=d8.length;var d4=document.createTextNode(d8)}else{var d4=document.createDocumentFragment(),d6=0;while(true){bV.lastIndex=d6;var dY=bV.exec(d8);var d3=dY?dY.index-d6:d8.length-d6;if(d3){d4.appendChild(document.createTextNode(d8.slice(d6,d6+d3)));d1.col+=d3}if(!dY){break}d6+=d3+1;if(dY[0]=="\t"){var d2=d1.cm.options.tabSize,d5=d2-d1.col%d2;d4.appendChild(bH("span",L(d5),"cm-tab"));d1.col+=d5}else{var dZ=bH("span","\u2022","cm-invalidchar");dZ.title="\\u"+dY[0].charCodeAt(0).toString(16);d4.appendChild(dZ);d1.col+=1}}}if(dX||d0||d9||d1.measure){var d7=dX||"";if(d0){d7+=d0}if(d9){d7+=d9}return d1.pre.appendChild(bH("span",[d4],d7))}d1.pre.appendChild(d4)}function ak(dY,d3,d1,dX,d2){for(var dZ=0;dZ<d3.length;++dZ){var d0=d3.charAt(dZ),d4=dZ==0;if(d0>="\ud800"&&d0<"\udbff"&&dZ<d3.length-1){d0=d3.slice(dZ,dZ+2);++dZ}else{if(dZ&&dY.cm.options.lineWrapping&&dq.test(d3.slice(dZ-1,dZ+1))){dY.pre.appendChild(bH("wbr"))}}dY.measure[dY.pos]=ai(dY,d0,d1,d4&&dX,dZ==d3.length-1&&d2);dY.pos+=d0.length}if(d3.length){dY.addedOne=true}}function b5(dX,dY,dZ){if(dZ){if(!dX.display){dZ=dZ.cloneNode(true)}dX.pre.appendChild(dZ);if(dX.measure&&dY){dX.measure[dX.pos]=dZ;dX.addedOne=true}}dX.pos+=dY}function bz(d5,eb,d4){var d2=d5.markedSpans;if(!d2){for(var ee=1;ee<d4.length;ee+=2){eb.addToken(eb,d4[ee],a2(d4[ee+1]))}return}var d3=d5.text,ef=d3.length;var d1=0,ee=1,d8="",eg;var ei=0,dX,eh,d9,dZ;for(;;){if(ei==d1){dX=eh=d9="";dZ=null;ei=Infinity;var d6=null;for(var ec=0;ec<d2.length;++ec){var ed=d2[ec],ea=ed.marker;if(ed.from<=d1&&(ed.to==null||ed.to>d1)){if(ed.to!=null&&ei>ed.to){ei=ed.to;eh=""}if(ea.className){dX+=" "+ea.className}if(ea.startStyle&&ed.from==d1){d9+=" "+ea.startStyle}if(ea.endStyle&&ed.to==ei){eh+=" "+ea.endStyle}if(ea.collapsed&&(!dZ||dZ.marker.width<ea.width)){dZ=ed}}else{if(ed.from>d1&&ei>ed.from){ei=ed.from}}if(ea.type=="bookmark"&&ed.from==d1&&ea.replacedWith){d6=ea.replacedWith}}if(dZ&&(dZ.from||0)==d1){b5(eb,(dZ.to==null?ef:dZ.to)-d1,dZ.from!=null&&dZ.marker.replacedWith);if(dZ.to==null){return dZ.marker.find()}}if(d6&&!dZ){b5(eb,0,d6)}}if(d1>=ef){break}var d7=Math.min(ef,ei);while(true){if(d8){var dY=d1+d8.length;if(!dZ){var d0=dY>d7?d8.slice(0,d7-d1):d8;eb.addToken(eb,d0,eg?eg+dX:dX,d9,d1+d0.length==ei?eh:"")}if(dY>=d7){d8=d8.slice(d7-d1);d1=d7;break}d1=dY;d9=""}d8=d4[ee++];eg=a2(d4[ee++])}}}function c9(eb,d6,dY,dX,d2){function ec(ee){return dY?dY[ee]:null}var d9=d6.from,ea=d6.to,ed=d6.text;var d7=dm(eb,d9.line),d8=dm(eb,ea.line);var d5=a8(ed),d0=ec(ed.length-1),d4=ea.line-d9.line;if(d9.ch==0&&ea.ch==0&&d5==""){for(var dZ=0,d1=ed.length-1,d3=[];dZ<d1;++dZ){d3.push(bu(ed[dZ],ec(dZ),d2))}aC(d8,d8.text,d0,d2);if(d4){eb.remove(d9.line,d4)}if(d3.length){eb.insert(d9.line,d3)}}else{if(d7==d8){if(ed.length==1){aC(d7,d7.text.slice(0,d9.ch)+d5+d7.text.slice(ea.ch),d0,d2)}else{for(var d3=[],dZ=1,d1=ed.length-1;dZ<d1;++dZ){d3.push(bu(ed[dZ],ec(dZ),d2))}d3.push(bu(d5+d7.text.slice(ea.ch),d0,d2));aC(d7,d7.text.slice(0,d9.ch)+ed[0],ec(0),d2);eb.insert(d9.line+1,d3)}}else{if(ed.length==1){aC(d7,d7.text.slice(0,d9.ch)+ed[0]+d8.text.slice(ea.ch),ec(0),d2);eb.remove(d9.line+1,d4)}else{aC(d7,d7.text.slice(0,d9.ch)+ed[0],ec(0),d2);aC(d8,d5+d8.text.slice(ea.ch),d0,d2);for(var dZ=1,d1=ed.length-1,d3=[];dZ<d1;++dZ){d3.push(bu(ed[dZ],ec(dZ),d2))}if(d4>1){eb.remove(d9.line+1,d4-1)}eb.insert(d9.line+1,d3)}}}ce(eb,"change",eb,d6);bA(eb,dX.anchor,dX.head,null,true)}function N(dY){this.lines=dY;this.parent=null;for(var dZ=0,d0=dY.length,dX=0;dZ<d0;++dZ){dY[dZ].parent=this;dX+=dY[dZ].height}this.height=dX}N.prototype={chunkSize:function(){return this.lines.length},removeInner:function(dX,d1){for(var dZ=dX,d0=dX+d1;dZ<d0;++dZ){var dY=this.lines[dZ];this.height-=dY.height;U(dY);ce(dY,"delete")}this.lines.splice(dX,d1)},collapse:function(dX){dX.splice.apply(dX,[dX.length,0].concat(this.lines))},insertInner:function(dY,dZ,dX){this.height+=dX;this.lines=this.lines.slice(0,dY).concat(dZ).concat(this.lines.slice(dY));for(var d0=0,d1=dZ.length;d0<d1;++d0){dZ[d0].parent=this}},iterN:function(dX,d0,dZ){for(var dY=dX+d0;dX<dY;++dX){if(dZ(this.lines[dX])){return true}}}};function bM(d0){this.children=d0;var dZ=0,dX=0;for(var dY=0,d2=d0.length;dY<d2;++dY){var d1=d0[dY];dZ+=d1.chunkSize();dX+=d1.height;d1.parent=this}this.size=dZ;this.height=dX;this.parent=null}bM.prototype={chunkSize:function(){return this.size},removeInner:function(dX,d4){this.size-=d4;for(var dZ=0;dZ<this.children.length;++dZ){var d3=this.children[dZ],d1=d3.chunkSize();if(dX<d1){var d0=Math.min(d4,d1-dX),d2=d3.height;d3.removeInner(dX,d0);this.height-=d2-d3.height;if(d1==d0){this.children.splice(dZ--,1);d3.parent=null}if((d4-=d0)==0){break}dX=0}else{dX-=d1}}if(this.size-d4<25){var dY=[];this.collapse(dY);this.children=[new N(dY)];this.children[0].parent=this}},collapse:function(dX){for(var dY=0,dZ=this.children.length;dY<dZ;++dY){this.children[dY].collapse(dX)}},insertInner:function(dY,d5,d4){this.size+=d5.length;this.height+=d4;for(var dZ=0,d1=this.children.length;dZ<d1;++dZ){var dX=this.children[dZ],d2=dX.chunkSize();if(dY<=d2){dX.insertInner(dY,d5,d4);if(dX.lines&&dX.lines.length>50){while(dX.lines.length>50){var d0=dX.lines.splice(dX.lines.length-25,25);var d3=new N(d0);dX.height-=d3.height;this.children.splice(dZ+1,0,d3);d3.parent=this}this.maybeSpill()}break}dY-=d2}},maybeSpill:function(){if(this.children.length<=10){return}var d0=this;do{var dY=d0.children.splice(d0.children.length-5,5);var dZ=new bM(dY);if(!d0.parent){var d1=new bM(d0.children);d1.parent=d0;d0.children=[d1,dZ];d0=d1}else{d0.size-=dZ.size;d0.height-=dZ.height;var dX=dE(d0.parent.children,d0);d0.parent.children.splice(dX+1,0,dZ)}dZ.parent=d0.parent}while(d0.children.length>10);d0.parent.maybeSpill()},iterN:function(dX,d4,d3){for(var dY=0,d1=this.children.length;dY<d1;++dY){var d2=this.children[dY],d0=d2.chunkSize();if(dX<d0){var dZ=Math.min(d4,d0-dX);if(d2.iterN(dX,dZ,d3)){return true}if((d4-=dZ)==0){break}dX=0}else{dX-=d0}}}};var cy=0;var M=aq.Doc=function(dZ,dY,dX){if(!(this instanceof M)){return new M(dZ,dY,dX)}if(dX==null){dX=0}bM.call(this,[new N([bu("",null)])]);this.first=dX;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.history=aT();this.frontier=dX;var d0=dP(dX,0);this.sel={from:d0,to:d0,head:d0,anchor:d0,shift:false,extend:false,goalColumn:null};this.id=++cy;this.modeOption=dY;if(typeof dZ=="string"){dZ=cY(dZ)}c9(this,{from:d0,to:d0,text:dZ},null,{head:d0,anchor:d0})};M.prototype=dV(bM.prototype,{iter:function(dZ,dY,dX){if(dX){this.iterN(dZ-this.first,dY-dZ,dX)}else{this.iterN(this.first,this.first+this.size,dZ)}},insert:function(dY,dZ){var dX=0;for(var d0=0,d1=dZ.length;d0<d1;++d0){dX+=dZ[d0].height}this.insertInner(dY-this.first,dZ,dX)},remove:function(dX,dY){this.removeInner(dX-this.first,dY)},getValue:function(dY){var dX=bq(this,this.first,this.first+this.size);if(dY===false){return dX}return dX.join(dY||"\n")},setValue:function(dY){var dZ=dP(this.first,0),dX=this.first+this.size-1;cE(this,{from:dZ,to:dP(dX,dm(this,dX).text.length),text:cY(dY),origin:"setValue"},{head:dZ,anchor:dZ},true)},replaceRange:function(dY,d0,dZ,dX){d0=ap(this,d0);dZ=dZ?ap(this,dZ):d0;b2(this,dY,d0,dZ,dX)},getRange:function(d0,dZ,dY){var dX=cJ(this,ap(this,d0),ap(this,dZ));if(dY===false){return dX}return dX.join(dY||"\n")},getLine:function(dY){var dX=this.getLineHandle(dY);return dX&&dX.text},setLine:function(dX,dY){if(bo(this,dX)){b2(this,dY,dP(dX,0),ap(this,dP(dX)))}},removeLine:function(dX){if(bo(this,dX)){b2(this,"",dP(dX,0),ap(this,dP(dX+1,0)))}},getLineHandle:function(dX){if(bo(this,dX)){return dm(this,dX)}},getLineNumber:function(dX){return l(dX)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(dX){return ap(this,dX)},getCursor:function(dZ){var dX=this.sel,dY;if(dZ==null||dZ=="head"){dY=dX.head}else{if(dZ=="anchor"){dY=dX.anchor}else{if(dZ=="end"||dZ===false){dY=dX.to}else{dY=dX.from}}}return dU(dY)},somethingSelected:function(){return !o(this.sel.head,this.sel.anchor)},setCursor:cw(function(dX,dY,d0){var dZ=ap(this,typeof dX=="number"?dP(dX,dY||0):dX);if(d0){dD(this,dZ)}else{bA(this,dZ,dZ)}}),setSelection:cw(function(dX,dY){bA(this,ap(this,dX),ap(this,dY||dX))}),extendSelection:cw(function(dY,dX){dD(this,ap(this,dY),dX&&ap(this,dX))}),getSelection:function(dX){return this.getRange(this.sel.from,this.sel.to,dX)},replaceSelection:function(dY,dZ,dX){cE(this,{from:this.sel.from,to:this.sel.to,text:cY(dY),origin:dX},dZ||"around")},undo:cw(function(){dx(this,"undo")}),redo:cw(function(){dx(this,"redo")}),setExtending:function(dX){this.sel.extend=dX},historySize:function(){var dX=this.history;return{undo:dX.done.length,redo:dX.undone.length}},clearHistory:function(){this.history=aT()},markClean:function(){this.history.dirtyCounter=0;this.history.lastOp=this.history.lastOrigin=null},isClean:function(){return this.history.dirtyCounter==0},getHistory:function(){return{done:cN(this.history.done),undone:cN(this.history.undone)}},setHistory:function(dY){var dX=this.history=aT();dX.done=dY.done.slice(0);dX.undone=dY.undone.slice(0)},markText:function(dZ,dY,dX){return bJ(this,ap(this,dZ),ap(this,dY),dX,"range")},setBookmark:function(dZ,dX){var dY={replacedWith:dX&&(dX.nodeType==null?dX.widget:dX),insertLeft:dX&&dX.insertLeft};dZ=ap(this,dZ);return bJ(this,dZ,dZ,dY,"bookmark")},findMarksAt:function(d1){d1=ap(this,d1);var d0=[],dY=dm(this,d1.line).markedSpans;if(dY){for(var dX=0;dX<dY.length;++dX){var dZ=dY[dX];if((dZ.from==null||dZ.from<=d1.ch)&&(dZ.to==null||dZ.to>=d1.ch)){d0.push(dZ.marker.parent||dZ.marker)}}}return d0},getAllMarks:function(){var dX=[];this.iter(function(dZ){var dY=dZ.markedSpans;if(dY){for(var d0=0;d0<dY.length;++d0){if(dY[d0].from!=null){dX.push(dY[d0].marker)}}}});return dX},posFromIndex:function(dY){var dX,dZ=this.first;this.iter(function(d0){var d1=d0.text.length+1;if(d1>dY){dX=dY;return true}dY-=d1;++dZ});return ap(this,dP(dZ,dX))},indexFromPos:function(dY){dY=ap(this,dY);var dX=dY.ch;if(dY.line<this.first||dY.ch<0){return 0}this.iter(this.first,dY.line,function(dZ){dX+=dZ.text.length+1});return dX},copy:function(dX){var dY=new M(bq(this,this.first,this.first+this.size),this.modeOption,this.first);dY.scrollTop=this.scrollTop;dY.scrollLeft=this.scrollLeft;dY.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:false,goalColumn:this.sel.goalColumn};if(dX){dY.history.undoDepth=this.history.undoDepth;dY.setHistory(this.getHistory())}return dY},linkedDoc:function(dX){if(!dX){dX={}}var d0=this.first,dZ=this.first+this.size;if(dX.from!=null&&dX.from>d0){d0=dX.from}if(dX.to!=null&&dX.to<dZ){dZ=dX.to}var dY=new M(bq(this,d0,dZ),dX.mode||this.modeOption,d0);if(dX.sharedHist){dY.history=this.history}(this.linked||(this.linked=[])).push({doc:dY,sharedHist:dX.sharedHist});dY.linked=[{doc:this,isParent:true,sharedHist:dX.sharedHist}];return dY},unlinkDoc:function(dY){if(dY instanceof aq){dY=dY.doc}if(this.linked){for(var dZ=0;dZ<this.linked.length;++dZ){var d0=this.linked[dZ];if(d0.doc!=dY){continue}this.linked.splice(dZ,1);dY.unlinkDoc(this);break}}if(dY.history==this.history){var dX=[dY.id];aX(dY,function(d1){dX.push(d1.id)},true);dY.history=aT();dY.history.done=cN(this.history.done,dX);dY.history.undone=cN(this.history.undone,dX)}},iterLinkedDocs:function(dX){aX(this,dX)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});M.prototype.eachLine=M.prototype.iter;var c5="iter insert remove copy getEditor".split(" ");for(var dF in M.prototype){if(M.prototype.hasOwnProperty(dF)&&dE(c5,dF)<0){aq.prototype[dF]=(function(dX){return function(){return dX.apply(this.doc,arguments)}})(M.prototype[dF])}}function aX(d0,dZ,dY){function dX(d6,d4,d2){if(d6.linked){for(var d3=0;d3<d6.linked.length;++d3){var d1=d6.linked[d3];if(d1.doc==d4){continue}var d5=d2&&d1.sharedHist;if(dY&&!d5){continue}dZ(d1.doc,d5);dX(d1.doc,d6,d5)}}}dX(d0,null,true)}function cm(dX,dY){if(dY.cm){throw new Error("This document is already in use.")}dX.doc=dY;dY.cm=dX;cu(dX);b8(dX);if(!dX.options.lineWrapping){bB(dX)}dX.options.mode=dY.modeOption;bR(dX)}function dm(dX,d1){d1-=dX.first;while(!dX.lines){for(var dY=0;;++dY){var d0=dX.children[dY],dZ=d0.chunkSize();if(d1<dZ){dX=d0;break}d1-=dZ}}return dX.lines[d1]}function cJ(dZ,d1,dX){var dY=[],d0=d1.line;dZ.iter(d1.line,dX.line+1,function(d2){var d3=d2.text;if(d0==dX.line){d3=d3.slice(0,dX.ch)}if(d0==d1.line){d3=d3.slice(d1.ch)}dY.push(d3);++d0});return dY}function bq(dY,d0,dZ){var dX=[];dY.iter(d0,dZ,function(d1){dX.push(d1.text)});return dX}function aO(dY,dX){var dZ=dX-dY.height;for(var d0=dY;d0;d0=d0.parent){d0.height+=dZ}}function l(dX){if(dX.parent==null){return null}var d1=dX.parent,d0=dE(d1.lines,dX);for(var dY=d1.parent;dY;d1=dY,dY=dY.parent){for(var dZ=0;;++dZ){if(dY.children[dZ]==d1){break}d0+=dY.children[dZ].chunkSize()}}return d0+d1.first}function ba(d3,d1){var dZ=d3.first;outer:do{for(var d0=0,d2=d3.children.length;d0<d2;++d0){var dY=d3.children[d0],dX=dY.height;if(d1<dX){d3=dY;continue outer}d1-=dX;dZ+=dY.chunkSize()}return dZ}while(!d3.lines);for(var d0=0,d2=d3.lines.length;d0<d2;++d0){var d5=d3.lines[d0],d4=d5.height;if(d1<d4){break}d1-=d4}return dZ+d0}function cg(dX,d0){d0=aH(dX.doc,d0);var d2=0,dZ=d0.parent;for(var d1=0;d1<dZ.lines.length;++d1){var dY=dZ.lines[d1];if(dY==d0){break}else{d2+=dY.height}}for(var d3=dZ.parent;d3;dZ=d3,d3=dZ.parent){for(var d1=0;d1<d3.children.length;++d1){var d4=d3.children[d1];if(d4==dZ){break}else{d2+=d4.height}}}return d2}function cq(dY){var dX=dY.order;if(dX==null){dX=dY.order=cp(dY.text)}return dX}function aT(){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function cf(dY,d2,d1,d0){var dX=d2["spans_"+dY.id],dZ=0;dY.iter(Math.max(dY.first,d1),Math.min(dY.first+dY.size,d0),function(d3){if(d3.markedSpans){(dX||(dX=d2["spans_"+dY.id]={}))[dZ]=d3.markedSpans}++dZ})}function at(dX,dZ){var dY={from:dZ.from,to:aw(dZ),text:cJ(dX,dZ.from,dZ.to)};cf(dX,dY,dZ.from.line,dZ.to.line+1);aX(dX,function(d0){cf(d0,dY,dZ.from.line,dZ.to.line+1)},true);return dY}function g(d2,d4,d1,dX){var d0=d2.history;d0.undone.length=0;var dZ=+new Date,d3=a8(d0.done);if(d3&&(d0.lastOp==dX||d0.lastOrigin==d4.origin&&d4.origin&&((d4.origin.charAt(0)=="+"&&d0.lastTime>dZ-600)||d4.origin.charAt(0)=="*"))){var dY=a8(d3.changes);if(o(d4.from,d4.to)&&o(d4.from,dY.to)){dY.to=aw(d4)}else{d3.changes.push(at(d2,d4))}d3.anchorAfter=d1.anchor;d3.headAfter=d1.head}else{d3={changes:[at(d2,d4)],anchorBefore:d2.sel.anchor,headBefore:d2.sel.head,anchorAfter:d1.anchor,headAfter:d1.head};d0.done.push(d3);while(d0.done.length>d0.undoDepth){d0.done.shift()}if(d0.dirtyCounter<0){d0.dirtyCounter=NaN}else{d0.dirtyCounter++}}d0.lastTime=dZ;d0.lastOp=dX;d0.lastOrigin=d4.origin}function F(dZ){if(!dZ){return null}for(var dY=0,dX;dY<dZ.length;++dY){if(dZ[dY].marker.explicitlyCleared){if(!dX){dX=dZ.slice(0,dY)}}else{if(dX){dX.push(dZ[dY])}}}return !dX?dZ:dX.length?dX:null}function H(d0,d1){var dZ=d1["spans_"+d0.id];if(!dZ){return null}for(var dY=0,dX=[];dY<d1.text.length;++dY){dX.push(F(dZ[dY]))}return dX}function cN(d7,d0){for(var d3=0,dY=[];d3<d7.length;++d3){var dZ=d7[d3],d5=dZ.changes,d6=[];dY.push({changes:d6,anchorBefore:dZ.anchorBefore,headBefore:dZ.headBefore,anchorAfter:dZ.anchorAfter,headAfter:dZ.headAfter});for(var d2=0;d2<d5.length;++d2){var d4=d5[d2],d1;d6.push({from:d4.from,to:d4.to,text:d4.text});if(d0){for(var dX in d4){if(d1=dX.match(/^spans_(\d+)$/)){if(dE(d0,Number(d1[1]))>-1){a8(d6)[dX]=d4[dX];delete d4[dX]}}}}}}return dY}function aF(d0,dZ,dY,dX){if(dY<d0.line){d0.line+=dX}else{if(dZ<d0.line){d0.line=dZ;d0.ch=0}}}function bT(d0,d2,d3,d4){for(var dZ=0;dZ<d0.length;++dZ){var dX=d0[dZ],d1=true;for(var dY=0;dY<dX.changes.length;++dY){var d5=dX.changes[dY];if(!dX.copied){d5.from=dU(d5.from);d5.to=dU(d5.to)}if(d3<d5.from.line){d5.from.line+=d4;d5.to.line+=d4}else{if(d2<=d5.to.line){d1=false;break}}}if(!dX.copied){dX.anchorBefore=dU(dX.anchorBefore);dX.headBefore=dU(dX.headBefore);dX.anchorAfter=dU(dX.anchorAfter);dX.readAfter=dU(dX.headAfter);dX.copied=true}if(!d1){d0.splice(0,dZ+1);dZ=0}else{aF(dX.anchorBefore);aF(dX.headBefore);aF(dX.anchorAfter);aF(dX.headAfter)}}}function ah(dY,d1){var d0=d1.from.line,dZ=d1.to.line,dX=d1.text.length-(dZ-d0)-1;bT(dY.done,d0,dZ,dX);bT(dY.undone,d0,dZ,dX)}function a0(){c3(this)}function k(dX){if(!dX.stop){dX.stop=a0}return dX}function X(dX){if(dX.preventDefault){dX.preventDefault()}else{dX.returnValue=false}}function ch(dX){if(dX.stopPropagation){dX.stopPropagation()}else{dX.cancelBubble=true}}function c3(dX){X(dX);ch(dX)}aq.e_stop=c3;aq.e_preventDefault=X;aq.e_stopPropagation=ch;function bX(dX){return dX.target||dX.srcElement}function aN(dY){var dX=dY.which;if(dX==null){if(dY.button&1){dX=1}else{if(dY.button&2){dX=3}else{if(dY.button&4){dX=2}}}}if(a5&&dY.ctrlKey&&dX==1){dX=3}return dX}function cC(d0,dY,dZ){if(d0.addEventListener){d0.addEventListener(dY,dZ,false)}else{if(d0.attachEvent){d0.attachEvent("on"+dY,dZ)}else{var d1=d0._handlers||(d0._handlers={});var dX=d1[dY]||(d1[dY]=[]);dX.push(dZ)}}}function dK(d1,dZ,d0){if(d1.removeEventListener){d1.removeEventListener(dZ,d0,false)}else{if(d1.detachEvent){d1.detachEvent("on"+dZ,d0)}else{var dX=d1._handlers&&d1._handlers[dZ];if(!dX){return}for(var dY=0;dY<dX.length;++dY){if(dX[dY]==d0){dX.splice(dY,1);break}}}}}function af(d1,d0){var dX=d1._handlers&&d1._handlers[d0];if(!dX){return}var dY=Array.prototype.slice.call(arguments,2);for(var dZ=0;dZ<dX.length;++dZ){dX[dZ].apply(null,dY)}}var dv,cd=0;function ce(d2,d1){var dX=d2._handlers&&d2._handlers[d1];if(!dX){return}var dZ=Array.prototype.slice.call(arguments,2);if(!dv){++cd;dv=[];setTimeout(df,0)}function dY(d3){return function(){d3.apply(null,dZ)}}for(var d0=0;d0<dX.length;++d0){dv.push(dY(dX[d0]))}}function df(){--cd;var dX=dv;dv=null;for(var dY=0;dY<dX.length;++dY){dX[dY]()}}function w(dZ,dY){var dX=dZ._handlers&&dZ._handlers[dY];return dX&&dX.length>0}aq.on=cC;aq.off=dK;aq.signal=af;var c7=30;var aS=aq.Pass={toString:function(){return"CodeMirror.Pass"}};function i(){this.id=null}i.prototype={set:function(dX,dY){clearTimeout(this.id);this.id=setTimeout(dY,dX)}};function dQ(dY,dX,d0){if(dX==null){dX=dY.search(/[^\s\u00a0]/);if(dX==-1){dX=dY.length}}for(var dZ=0,d1=0;dZ<dX;++dZ){if(dY.charAt(dZ)=="\t"){d1+=d0-(d1%d0)}else{++d1}}return d1}aq.countColumn=dQ;var bb=[""];function L(dX){while(bb.length<=dX){bb.push(a8(bb)+" ")}return bb[dX]}function a8(dX){return dX[dX.length-1]}function bP(dX){if(av){dX.selectionStart=0;dX.selectionEnd=dX.value.length}else{dX.select()}}function dE(d0,dX){if(d0.indexOf){return d0.indexOf(dX)}for(var dY=0,dZ=d0.length;dY<dZ;++dY){if(d0[dY]==dX){return dY}}return -1}function dV(d0,dY){function dX(){}dX.prototype=d0;var dZ=new dX();if(dY){bS(dY,dZ)}return dZ}function bS(dY,dX){if(!dX){dX={}}for(var dZ in dY){if(dY.hasOwnProperty(dZ)){dX[dZ]=dY[dZ]}}return dX}function dI(dZ){for(var dX=[],dY=0;dY<dZ;++dY){dX.push(undefined)}return dX}function b4(dY){var dX=Array.prototype.slice.call(arguments,1);return function(){return dY.apply(null,dX)}}var K=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/;function V(dX){return/\w/.test(dX)||dX>"\x80"&&(dX.toUpperCase()!=dX.toLowerCase()||K.test(dX))}function cG(dX){for(var dY in dX){if(dX.hasOwnProperty(dY)&&dX[dY]){return false}}return true}var cr=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;function bH(dX,d1,d0,dZ){var d2=document.createElement(dX);if(d0){d2.className=d0}if(dZ){d2.style.cssText=dZ}if(typeof d1=="string"){aZ(d2,d1)}else{if(d1){for(var dY=0;dY<d1.length;++dY){d2.appendChild(d1[dY])}}}return d2}function cR(dX){if(!ao){dX.innerHTML=""}else{while(dX.firstChild){dX.removeChild(dX.firstChild)}}return dX}function cZ(dX,dY){return cR(dX).appendChild(dY)}function aZ(dX,dY){if(ca){dX.innerHTML="";dX.appendChild(document.createTextNode(dY))}else{dX.textContent=dY}}function t(dX){return dX.getBoundingClientRect()}aq.replaceGetRect=function(dX){t=dX};var cx=function(){if(ca){return false}var dX=bH("div");return"draggable" in dX||"dragDrop" in dX}();var dq=/^$/;if(bt){dq=/$'/}else{if(by){dq=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/}else{if(aD){dq=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/}}}var bp;function co(dX){if(bp!=null){return bp}var dY=bH("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");cZ(dX,dY);if(dY.offsetWidth){bp=dY.offsetHeight-dY.clientHeight}return bp||0}var dj;function bj(dX){if(dj==null){var dY=bH("span","\u200b");cZ(dX,bH("span",[dY,document.createTextNode("x")]));if(dX.firstChild.offsetHeight!=0){dj=dY.offsetWidth<=1&&dY.offsetHeight>2&&!cb}}if(dj){return bH("span","\u200b")}else{return bH("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}}var cY="\n\nb".split(/\n/).length!=3?function(d2){var d3=0,dX=[],d1=d2.length;while(d3<=d1){var d0=d2.indexOf("\n",d3);if(d0==-1){d0=d2.length}var dZ=d2.slice(d3,d2.charAt(d0-1)=="\r"?d0-1:d0);var dY=dZ.indexOf("\r");if(dY!=-1){dX.push(dZ.slice(0,dY));d3+=dY+1}else{dX.push(dZ);d3=d0+1}}return dX}:function(dX){return dX.split(/\r\n?|\n/)};aq.splitLines=cY;var cA=window.getSelection?function(dY){try{return dY.selectionStart!=dY.selectionEnd}catch(dX){return false}}:function(dZ){try{var dX=dZ.ownerDocument.selection.createRange()}catch(dY){}if(!dX||dX.parentElement()!=dZ){return false}return dX.compareEndPoints("StartToEnd",dX)!=0};var bF=(function(){var dX=bH("div");if("oncopy" in dX){return true}dX.setAttribute("oncopy","return;");return typeof dX.oncopy=="function"})();var E={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};aq.keyNames=E;(function(){for(var dX=0;dX<10;dX++){E[dX+48]=String(dX)}for(var dX=65;dX<=90;dX++){E[dX]=String.fromCharCode(dX)}for(var dX=1;dX<=12;dX++){E[dX+111]=E[dX+63235]="F"+dX}})();function dy(dX,d2,d1,d0){if(!dX){return d0(d2,d1,"ltr")}for(var dZ=0;dZ<dX.length;++dZ){var dY=dX[dZ];if(dY.from<d1&&dY.to>d2||d2==d1&&dY.to==d2){d0(Math.max(dY.from,d2),Math.min(dY.to,d1),dY.level==1?"rtl":"ltr")}}}function cI(dX){return dX.level%2?dX.to:dX.from}function cX(dX){return dX.level%2?dX.from:dX.to}function br(dY){var dX=cq(dY);return dX?cI(dX[0]):0}function cM(dY){var dX=cq(dY);if(!dX){return dY.text.length}return cX(a8(dX))}function z(dY,d1){var dZ=dm(dY.doc,d1);var d2=aH(dY.doc,dZ);if(d2!=dZ){d1=l(d2)}var dX=cq(d2);var d0=!dX?0:dX[0].level%2?cM(d2):br(d2);return dP(d1,d0)}function T(dZ,d2){var dY,d0;while(dY=I(d0=dm(dZ.doc,d2))){d2=dY.find().to.line}var dX=cq(d0);var d1=!dX?d0.text.length:dX[0].level%2?br(d0):cM(d0);return dP(d2,d1)}function bZ(d7,dX,dZ,d3){var d5=cq(d7);if(!d5){return aV(d7,dX,dZ,d3)}var d6=d3?function(d9,d8){do{d9+=d8}while(d9>0&&cr.test(d7.text.charAt(d9)));return d9}:function(d9,d8){return d9+d8};var d0=d5[0].level;for(var d1=0;d1<d5.length;++d1){var dY=d5[d1],d4=dY.level%2==d0;if((dY.from<dX&&dY.to>dX)||(d4&&(dY.from==dX||dY.to==dX))){break}}var d2=d6(dX,dY.level%2?-dZ:dZ);while(d2!=null){if(dY.level%2==d0){if(d2<dY.from||d2>dY.to){dY=d5[d1+=dZ];d2=dY&&(dZ>0==dY.level%2?d6(dY.to,-1):d6(dY.from,1))}else{break}}else{if(d2==cI(dY)){dY=d5[--d1];d2=dY&&cX(dY)}else{if(d2==cX(dY)){dY=d5[++d1];d2=dY&&cI(dY)}else{break}}}}return d2<0||d2>d7.text.length?null:d2}function aV(dX,d1,dY,dZ){var d0=d1+dY;if(dZ){while(d0>0&&cr.test(dX.text.charAt(d0))){d0+=dY}}return d0<0||d0>dX.text.length?null:d0}var cp=(function(){var d3="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL";var d1="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr";function d0(d6){if(d6<=255){return d3.charAt(d6)}else{if(1424<=d6&&d6<=1524){return"R"}else{if(1536<=d6&&d6<=1791){return d1.charAt(d6-1536)}else{if(1792<=d6&&d6<=2220){return"r"}else{return"L"}}}}}var dX=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var d5=/[stwN]/,dZ=/[LRr]/,dY=/[Lb1n]/,d2=/[1n]/;var d4="L";return function(eg){if(!dX.test(eg)){return false}var em=eg.length,ec=[];for(var el=0,d8;el<em;++el){ec.push(d8=d0(eg.charCodeAt(el)))}for(var el=0,ef=d4;el<em;++el){var d8=ec[el];if(d8=="m"){ec[el]=ef}else{ef=d8}}for(var el=0,d6=d4;el<em;++el){var d8=ec[el];if(d8=="1"&&d6=="r"){ec[el]="n"}else{if(dZ.test(d8)){d6=d8;if(d8=="r"){ec[el]="R"}}}}for(var el=1,ef=ec[0];el<em-1;++el){var d8=ec[el];if(d8=="+"&&ef=="1"&&ec[el+1]=="1"){ec[el]="1"}else{if(d8==","&&ef==ec[el+1]&&(ef=="1"||ef=="n")){ec[el]=ef}}ef=d8}for(var el=0;el<em;++el){var d8=ec[el];if(d8==","){ec[el]="N"}else{if(d8=="%"){for(var d9=el+1;d9<em&&ec[d9]=="%";++d9){}var en=(el&&ec[el-1]=="!")||(d9<em-1&&ec[d9]=="1")?"1":"N";for(var ej=el;ej<d9;++ej){ec[ej]=en}el=d9-1}}}for(var el=0,d6=d4;el<em;++el){var d8=ec[el];if(d6=="L"&&d8=="1"){ec[el]="L"}else{if(dZ.test(d8)){d6=d8}}}for(var el=0;el<em;++el){if(d5.test(ec[el])){for(var d9=el+1;d9<em&&d5.test(ec[d9]);++d9){}var ed=(el?ec[el-1]:d4)=="L";var d7=(d9<em-1?ec[d9]:d4)=="L";var en=ed||d7?"L":"R";for(var ej=el;ej<d9;++ej){ec[ej]=en}el=d9-1}}var ek=[],eh;for(var el=0;el<em;){if(dY.test(ec[el])){var ea=el;for(++el;el<em&&dY.test(ec[el]);++el){}ek.push({from:ea,to:el,level:0})}else{var eb=el,ee=ek.length;for(++el;el<em&&ec[el]!="L";++el){}for(var ej=eb;ej<el;){if(d2.test(ec[ej])){if(eb<ej){ek.splice(ee,0,{from:eb,to:ej,level:1})}var ei=ej;for(++ej;ej<el&&d2.test(ec[ej]);++ej){}ek.splice(ee,0,{from:ei,to:ej,level:2});eb=ej}else{++ej}}if(eb<el){ek.splice(ee,0,{from:eb,to:el,level:1})}}}if(ek[0].level==1&&(eh=eg.match(/^\s+/))){ek[0].from=eh[0].length;ek.unshift({from:0,to:eh[0].length,level:0})}if(a8(ek).level==1&&(eh=eg.match(/\s+$/))){a8(ek).to-=eh[0].length;ek.push({from:em-eh[0].length,to:em,level:0})}if(ek[0].level!=a8(ek).level){ek.push({from:em,to:em,level:ek[0].level})}return ek}})();aq.version="3.1";return aq})();
(function(){var d="CodeMirror-activeline";var c="CodeMirror-activeline-background";CodeMirror.defineOption("styleActiveLine",false,function(e,h,f){var g=f&&f!=CodeMirror.Init;if(h&&!g){b(e);e.on("cursorActivity",b)}else{if(!h&&g){e.off("cursorActivity",b);a(e);delete e._activeLine}}});function a(e){if("_activeLine" in e){e.removeLineClass(e._activeLine,"wrap",d);e.removeLineClass(e._activeLine,"background",c)}}function b(e){var f=e.getLineHandle(e.getCursor().line);if(e._activeLine==f){return}a(e);e.addLineClass(f,"wrap",d);e.addLineClass(f,"background",c);e._activeLine=f}})();
(function(){var c=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8);var e=CodeMirror.Pos;var b=1000;var h={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function d(r){var s=r.getCursor(),w=r.getLineHandle(s.line),q=s.ch-1;var l=(q>=0&&h[w.text.charAt(q)])||h[w.text.charAt(++q)];if(!l){return null}var m=l.charAt(1)==">",o=m?1:-1;var j=r.getTokenAt(e(s.line,q+1)).type;var p=[w.text.charAt(q)],t=/[(){}[\]]/;function v(x,C,B){if(!x.text){return}var A=m?0:x.text.length-1,i=m?x.text.length:-1;if(B!=null){A=B+o}for(;A!=i;A+=o){var z=x.text.charAt(A);if(t.test(z)&&r.getTokenAt(e(C,A+1)).type==j){var y=h[z];if(y.charAt(1)==">"==m){p.push(z)}else{if(p.pop()!=y.charAt(0)){return{pos:A,match:false}}else{if(!p.length){return{pos:A,match:true}}}}}}}for(var k=s.line,u,n=m?Math.min(k+100,r.lineCount()):Math.max(-1,k-100);k!=n;k+=o){if(k==s.line){u=v(w,k,q)}else{u=v(r.getLineHandle(k),k)}if(u){break}}return{from:e(s.line,q),to:u&&e(k,u.pos),match:u&&u.match}}function a(j,o){var n=d(j);if(!n||j.getLine(n.from.line).length>b||n.to&&j.getLine(n.to.line).length>b){return}var m=n.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var l=j.markText(n.from,e(n.from.line,n.from.ch+1),{className:m});var k=n.to&&j.markText(n.to,e(n.to.line,n.to.ch+1),{className:m});if(c&&j.state.focused){j.display.input.focus()}var i=function(){j.operation(function(){l.clear();k&&k.clear()})};if(o){setTimeout(i,800)}else{return i}}var f=null;function g(i){i.operation(function(){if(f){f();f=null}if(!i.somethingSelected()){f=a(i,false)}})}CodeMirror.defineOption("matchBrackets",false,function(i,j){if(j){i.on("cursorActivity",g)}else{i.off("cursorActivity",g)}});CodeMirror.defineExtension("matchBrackets",function(){a(this,true)});CodeMirror.defineExtension("findMatchingBracket",function(){return d(this)})})();
(function(){var b="()[]{}''\"\"";CodeMirror.defineOption("autoCloseBrackets",false,function(c,e,d){var f=d&&d!=CodeMirror.Init;if(e&&!f){c.addKeyMap(a(typeof e=="string"?e:b))}else{if(!e&&f){c.removeKeyMap("autoCloseBrackets")}}});function a(d){var e={name:"autoCloseBrackets"};for(var c=0;c<d.length;c+=2){(function(h,g){function f(i){var k=i.getCursor(),j=i.getRange(k,CodeMirror.Pos(k.line,k.ch+1));if(j!=g){return CodeMirror.Pass}else{i.execCommand("goCharRight")}}e["'"+h+"'"]=function(i){if(h==g&&f(i)!=CodeMirror.Pass){return}var k=i.getCursor("start"),j=CodeMirror.Pos(k.line,k.ch+1);i.replaceSelection(h+g,{head:j,anchor:j})};if(h!=g){e["'"+g+"'"]=f}})(d.charAt(c),d.charAt(c+1))}return e}})();
(function(){CodeMirror.defineOption("autoCloseTags",false,function(e,h,f){if(h&&(f==CodeMirror.Init||!f)){var g={name:"autoCloseTags"};if(typeof h!="object"||h.whenClosing){g["'/'"]=function(i){return d(i,"/")}}if(typeof h!="object"||h.whenOpening){g["'>'"]=function(i){return d(i,">")}}e.addKeyMap(g)}else{if(!h&&(f!=CodeMirror.Init&&f)){e.removeKeyMap("autoCloseTags")}}});var b=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var a=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function d(p,e){var o=p.getCursor(),q=p.getTokenAt(o);var r=CodeMirror.innerMode(p.getMode(),q.state),f=r.state;if(r.mode.name!="xml"){return CodeMirror.Pass}var g=p.getOption("autoCloseTags"),k=r.mode.configuration=="html";var h=(typeof g=="object"&&g.dontCloseTags)||(k&&b);var m=(typeof g=="object"&&g.indentTags)||(k&&a);if(e==">"&&f.tagName){var i=f.tagName;if(q.end>o.ch){i=i.slice(0,i.length-q.end+o.ch)}var l=i.toLowerCase();if(q.type=="tag"&&f.type=="closeTag"||/\/\s*$/.test(q.string)||h&&c(h,l)>-1){return CodeMirror.Pass}var n=m&&c(m,l)>-1;var j=n?CodeMirror.Pos(o.line+1,0):CodeMirror.Pos(o.line,o.ch+1);p.replaceSelection(">"+(n?"\n\n":"")+"</"+i+">",{head:j,anchor:j});if(n){p.indentLine(o.line+1);p.indentLine(o.line+2)}return}else{if(e=="/"&&q.string=="<"){var i=f.context&&f.context.tagName;if(i){p.replaceSelection("/"+i+">","end")}return}}return CodeMirror.Pass}function c(j,f){if(j.indexOf){return j.indexOf(f)}for(var g=0,h=j.length;g<h;++g){if(j[g]==f){return g}}return -1}})();
CodeMirror.defineMode("stex",function(){function h(k,l){k.cmdState.push(l)}function g(k){if(k.cmdState.length>0){return k.cmdState[k.cmdState.length-1]}else{return null}}function j(l){if(l.cmdState.length>0){var k=l.cmdState.pop();k.closeBracket()}}function a(n){var m=n.cmdState;for(var l=m.length-1;l>=0;l--){var k=m[l];if(k.name=="DEFAULT"){continue}return k.styleIdentifier()}return null}function b(m,l,n,k){return function(){this.name=m;this.bracketNo=0;this.style=l;this.styles=k;this.brackets=n;this.styleIdentifier=function(){if(this.bracketNo<=this.styles.length){return this.styles[this.bracketNo-1]}else{return null}};this.openBracket=function(){this.bracketNo++;return"bracket"};this.closeBracket=function(){}}}var c=new Array();c.importmodule=b("importmodule","tag","{[",["string","builtin"]);c.documentclass=b("documentclass","tag","{[",["","atom"]);c.usepackage=b("documentclass","tag","[",["atom"]);c.begin=b("documentclass","tag","[",["atom"]);c.end=b("documentclass","tag","[",["atom"]);c.DEFAULT=function(){this.name="DEFAULT";this.style="tag";this.styleIdentifier=this.openBracket=this.closeBracket=function(){}};function d(l,k){l.f=k}function e(o,n){if(o.match(/^\\[a-zA-Z@]+/)){var l=o.current();l=l.substr(1,l.length-1);var k;if(c.hasOwnProperty(l)){k=c[l]}else{k=c.DEFAULT}k=new k();h(n,k);d(n,f);return k.style}if(o.match(/^\\[$&%#{}_]/)){return"tag"}if(o.match(/^\\[,;!\/]/)){return"tag"}var m=o.next();if(m=="%"){if(!o.eol()){d(n,i)}return"comment"}else{if(m=="}"||m=="]"){k=g(n);if(k){k.closeBracket(m);d(n,f)}else{return"error"}return"bracket"}else{if(m=="{"||m=="["){k=c.DEFAULT;k=new k();h(n,k);return"bracket"}else{if(/\d/.test(m)){o.eatWhile(/[\w.%]/);return"atom"}else{o.eatWhile(/[\w-_]/);return a(n)}}}}}function i(l,k){l.skipToEnd();d(k,e);return"comment"}function f(n,m){var l=n.peek();if(l=="{"||l=="["){var k=g(m);k.openBracket(l);n.eat(l);d(m,e);return"bracket"}if(/[ \t\r]/.test(l)){n.eat(l);return null}d(m,e);k=g(m);if(k){j(m)}return e(n,m)}return{startState:function(){return{f:e,cmdState:[]}},copyState:function(k){return{f:k.f,cmdState:k.cmdState.slice(0,k.cmdState.length)}},token:function(m,l){var k=l.f(m,l);return k}}});CodeMirror.defineMIME("text/x-stex","stex");CodeMirror.defineMIME("text/x-latex","stex");
CodeMirror.defineMode("xml",function(y,k){var r=y.indentUnit;var x=k.htmlMode?{autoSelfClosers:{area:true,base:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true},implicitlyClosed:{dd:true,li:true,optgroup:true,option:true,p:true,rp:true,rt:true,tbody:true,td:true,tfoot:true,th:true,tr:true},contextGrabbers:{dd:{dd:true,dt:true},dt:{dd:true,dt:true},li:{li:true},option:{option:true,optgroup:true},optgroup:{optgroup:true},p:{address:true,article:true,aside:true,blockquote:true,dir:true,div:true,dl:true,fieldset:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,menu:true,nav:true,ol:true,p:true,pre:true,section:true,table:true,ul:true},rp:{rp:true,rt:true},rt:{rp:true,rt:true},tbody:{tbody:true,tfoot:true},td:{td:true,th:true},tfoot:{tbody:true},th:{td:true,th:true},thead:{tbody:true,tfoot:true},tr:{tr:true}},doNotIndent:{pre:true},allowUnquoted:true,allowMissing:true}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false};var a=k.alignCDATA;var f,g;function o(F,E){function C(H){E.tokenize=H;return H(F,E)}var D=F.next();if(D=="<"){if(F.eat("!")){if(F.eat("[")){if(F.match("CDATA[")){return C(w("atom","]]>"))}else{return null}}else{if(F.match("--")){return C(w("comment","-->"))}else{if(F.match("DOCTYPE",true,true)){F.eatWhile(/[\w\._\-]/);return C(z(1))}else{return null}}}}else{if(F.eat("?")){F.eatWhile(/[\w\._\-]/);E.tokenize=w("meta","?>");return"meta"}else{var A=F.eat("/");f="";var G;while((G=F.eat(/[^\s\u00a0=<>\"\'\/?]/))){f+=G}if(!f){return"error"}g=A?"closeTag":"openTag";E.tokenize=n;return"tag"}}}else{if(D=="&"){var B;if(F.eat("#")){if(F.eat("x")){B=F.eatWhile(/[a-fA-F\d]/)&&F.eat(";")}else{B=F.eatWhile(/[\d]/)&&F.eat(";")}}else{B=F.eatWhile(/[\w\.\-:]/)&&F.eat(";")}return B?"atom":"error"}else{F.eatWhile(/[^&<]/);return null}}}function n(C,B){var A=C.next();if(A==">"||(A=="/"&&C.eat(">"))){B.tokenize=o;g=A==">"?"endTag":"selfcloseTag";return"tag"}else{if(A=="="){g="equals";return null}else{if(/[\'\"]/.test(A)){B.tokenize=j(A);return B.tokenize(C,B)}else{C.eatWhile(/[^\s\u00a0=<>\"\']/);return"word"}}}}function j(A){return function(C,B){while(!C.eol()){if(C.next()==A){B.tokenize=n;break}}return"string"}}function w(B,A){return function(D,C){while(!D.eol()){if(D.match(A)){C.tokenize=o;break}D.next()}return B}}function z(A){return function(D,C){var B;while((B=D.next())!=null){if(B=="<"){C.tokenize=z(A+1);return C.tokenize(D,C)}else{if(B==">"){if(A==1){C.tokenize=o;break}else{C.tokenize=z(A-1);return C.tokenize(D,C)}}}}return"meta"}}var l,h;function b(){for(var A=arguments.length-1;A>=0;A--){l.cc.push(arguments[A])}}function e(){b.apply(null,arguments);return true}function i(A,C){var B=x.doNotIndent.hasOwnProperty(A)||(l.context&&l.context.noIndent);l.context={prev:l.context,tagName:A,indent:l.indented,startOfLine:C,noIndent:B}}function u(){if(l.context){l.context=l.context.prev}}function d(A){if(A=="openTag"){l.tagName=f;return e(m,c(l.startOfLine))}else{if(A=="closeTag"){var B=false;if(l.context){if(l.context.tagName!=f){if(x.implicitlyClosed.hasOwnProperty(l.context.tagName.toLowerCase())){u()}B=!l.context||l.context.tagName!=f}}else{B=true}if(B){h="error"}return e(s(B))}}return e()}function c(A){return function(C){var B=l.tagName;l.tagName=null;if(C=="selfcloseTag"||(C=="endTag"&&x.autoSelfClosers.hasOwnProperty(B.toLowerCase()))){q(B.toLowerCase());return e()}if(C=="endTag"){q(B.toLowerCase());i(B,A);return e()}return e()}}function s(A){return function(B){if(A){h="error"}if(B=="endTag"){u();return e()}h="error";return e(arguments.callee)}}function q(B){var A;while(true){if(!l.context){return}A=l.context.tagName.toLowerCase();if(!x.contextGrabbers.hasOwnProperty(A)||!x.contextGrabbers[A].hasOwnProperty(B)){return}u()}}function m(A){if(A=="word"){h="attribute";return e(p,m)}if(A=="endTag"||A=="selfcloseTag"){return b()}h="error";return e(m)}function p(A){if(A=="equals"){return e(v,m)}if(!x.allowMissing){h="error"}else{if(A=="word"){h="attribute"}}return(A=="endTag"||A=="selfcloseTag")?b():e()}function v(A){if(A=="string"){return e(t)}if(A=="word"&&x.allowUnquoted){h="string";return e()}h="error";return(A=="endTag"||A=="selfCloseTag")?b():e()}function t(A){if(A=="string"){return e(t)}else{return b()}}return{startState:function(){return{tokenize:o,cc:[],indented:0,startOfLine:true,tagName:null,context:null}},token:function(D,C){if(D.sol()){C.startOfLine=true;C.indented=D.indentation()}if(D.eatSpace()){return null}h=g=f=null;var B=C.tokenize(D,C);C.type=g;if((B||g)&&B!="comment"){l=C;while(true){var A=C.cc.pop()||d;if(A(g||B)){break}}}C.startOfLine=false;return h||B},indent:function(D,A,C){var B=D.context;if((D.tokenize!=n&&D.tokenize!=o)||B&&B.noIndent){return C?C.match(/^(\s*)/)[0].length:0}if(a&&/<!\[CDATA\[/.test(A)){return 0}if(B&&/^<\//.test(A)){B=B.prev}while(B&&!B.startOfLine){B=B.prev}if(B){return B.indent+r}else{return 0}},electricChars:"/",configuration:k.htmlMode?"html":"xml"}});CodeMirror.defineMIME("text/xml","xml");CodeMirror.defineMIME("application/xml","xml");if(!CodeMirror.mimeModes.hasOwnProperty("text/html")){CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true})};
